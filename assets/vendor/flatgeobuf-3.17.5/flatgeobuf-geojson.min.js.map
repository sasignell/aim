{"version":3,"file":"flatgeobuf-geojson.min.js","sources":["../lib/mjs/ColumnMeta.js","../lib/mjs/flat-geobuf/column-type.js","../lib/mjs/CrsMeta.js","../node_modules/flatbuffers/mjs/constants.js","../node_modules/flatbuffers/mjs/utils.js","../node_modules/flatbuffers/mjs/long.js","../node_modules/flatbuffers/mjs/encoding.js","../lib/mjs/flat-geobuf/geometry-type.js","../node_modules/flatbuffers/mjs/byte-buffer.js","../node_modules/flatbuffers/mjs/builder.js","../lib/mjs/flat-geobuf/column.js","../lib/mjs/flat-geobuf/crs.js","../lib/mjs/flat-geobuf/header.js","../lib/mjs/HeaderMeta.js","../lib/mjs/flat-geobuf/geometry.js","../lib/mjs/generic/geometry.js","../lib/mjs/geojson/geometry.js","../lib/mjs/flat-geobuf/feature.js","../lib/mjs/generic/feature.js","../lib/mjs/geojson/feature.js","../node_modules/slice-source/empty.js","../node_modules/slice-source/concat.js","../node_modules/slice-source/index.js","../node_modules/slice-source/read.js","../node_modules/slice-source/slice.js","../node_modules/slice-source/cancel.js","../node_modules/@repeaterjs/repeater/repeater.js","../lib/mjs/Logger.js","../lib/mjs/Config.js","../lib/mjs/packedrtree.js","../lib/mjs/constants.js","../lib/mjs/HttpReader.js","../lib/mjs/generic/featurecollection.js","../lib/mjs/geojson/featurecollection.js","../lib/mjs/geojson.js"],"sourcesContent":["export default class ColumnMeta {\n    constructor(name, type, title, description, width, precision, scale, nullable, unique, primary_key) {\n        this.name = name;\n        this.type = type;\n        this.title = title;\n        this.description = description;\n        this.width = width;\n        this.precision = precision;\n        this.scale = scale;\n        this.nullable = nullable;\n        this.unique = unique;\n        this.primary_key = primary_key;\n    }\n}\n//# sourceMappingURL=ColumnMeta.js.map","export var ColumnType;\n(function (ColumnType) {\n    ColumnType[ColumnType[\"Byte\"] = 0] = \"Byte\";\n    ColumnType[ColumnType[\"UByte\"] = 1] = \"UByte\";\n    ColumnType[ColumnType[\"Bool\"] = 2] = \"Bool\";\n    ColumnType[ColumnType[\"Short\"] = 3] = \"Short\";\n    ColumnType[ColumnType[\"UShort\"] = 4] = \"UShort\";\n    ColumnType[ColumnType[\"Int\"] = 5] = \"Int\";\n    ColumnType[ColumnType[\"UInt\"] = 6] = \"UInt\";\n    ColumnType[ColumnType[\"Long\"] = 7] = \"Long\";\n    ColumnType[ColumnType[\"ULong\"] = 8] = \"ULong\";\n    ColumnType[ColumnType[\"Float\"] = 9] = \"Float\";\n    ColumnType[ColumnType[\"Double\"] = 10] = \"Double\";\n    ColumnType[ColumnType[\"String\"] = 11] = \"String\";\n    ColumnType[ColumnType[\"Json\"] = 12] = \"Json\";\n    ColumnType[ColumnType[\"DateTime\"] = 13] = \"DateTime\";\n    ColumnType[ColumnType[\"Binary\"] = 14] = \"Binary\";\n})(ColumnType || (ColumnType = {}));\n//# sourceMappingURL=column-type.js.map","export default class CrsMeta {\n    constructor(org, code, name, description, wkt, code_string) {\n        this.org = org;\n        this.code = code;\n        this.name = name;\n        this.description = description;\n        this.wkt = wkt;\n        this.code_string = code_string;\n    }\n}\n//# sourceMappingURL=CrsMeta.js.map","export const SIZEOF_SHORT = 2;\nexport const SIZEOF_INT = 4;\nexport const FILE_IDENTIFIER_LENGTH = 4;\nexport const SIZE_PREFIX_LENGTH = 4;\n","export const int32 = new Int32Array(2);\nexport const float32 = new Float32Array(int32.buffer);\nexport const float64 = new Float64Array(int32.buffer);\nexport const isLittleEndian = new Uint16Array(new Uint8Array([1, 0]).buffer)[0] === 1;\n","export function createLong(low, high) {\n    return Long.create(low, high);\n}\nexport class Long {\n    constructor(low, high) {\n        this.low = low | 0;\n        this.high = high | 0;\n    }\n    static create(low, high) {\n        // Special-case zero to avoid GC overhead for default values\n        return low == 0 && high == 0 ? Long.ZERO : new Long(low, high);\n    }\n    toFloat64() {\n        return (this.low >>> 0) + this.high * 0x100000000;\n    }\n    equals(other) {\n        return this.low == other.low && this.high == other.high;\n    }\n}\nLong.ZERO = new Long(0, 0);\n","export var Encoding;\n(function (Encoding) {\n    Encoding[Encoding[\"UTF8_BYTES\"] = 1] = \"UTF8_BYTES\";\n    Encoding[Encoding[\"UTF16_STRING\"] = 2] = \"UTF16_STRING\";\n})(Encoding || (Encoding = {}));\n","export var GeometryType;\n(function (GeometryType) {\n    GeometryType[GeometryType[\"Unknown\"] = 0] = \"Unknown\";\n    GeometryType[GeometryType[\"Point\"] = 1] = \"Point\";\n    GeometryType[GeometryType[\"LineString\"] = 2] = \"LineString\";\n    GeometryType[GeometryType[\"Polygon\"] = 3] = \"Polygon\";\n    GeometryType[GeometryType[\"MultiPoint\"] = 4] = \"MultiPoint\";\n    GeometryType[GeometryType[\"MultiLineString\"] = 5] = \"MultiLineString\";\n    GeometryType[GeometryType[\"MultiPolygon\"] = 6] = \"MultiPolygon\";\n    GeometryType[GeometryType[\"GeometryCollection\"] = 7] = \"GeometryCollection\";\n    GeometryType[GeometryType[\"CircularString\"] = 8] = \"CircularString\";\n    GeometryType[GeometryType[\"CompoundCurve\"] = 9] = \"CompoundCurve\";\n    GeometryType[GeometryType[\"CurvePolygon\"] = 10] = \"CurvePolygon\";\n    GeometryType[GeometryType[\"MultiCurve\"] = 11] = \"MultiCurve\";\n    GeometryType[GeometryType[\"MultiSurface\"] = 12] = \"MultiSurface\";\n    GeometryType[GeometryType[\"Curve\"] = 13] = \"Curve\";\n    GeometryType[GeometryType[\"Surface\"] = 14] = \"Surface\";\n    GeometryType[GeometryType[\"PolyhedralSurface\"] = 15] = \"PolyhedralSurface\";\n    GeometryType[GeometryType[\"TIN\"] = 16] = \"TIN\";\n    GeometryType[GeometryType[\"Triangle\"] = 17] = \"Triangle\";\n})(GeometryType || (GeometryType = {}));\n//# sourceMappingURL=geometry-type.js.map","import { FILE_IDENTIFIER_LENGTH, SIZEOF_INT } from \"./constants\";\nimport { Long } from \"./long\";\nimport { int32, isLittleEndian, float32, float64 } from \"./utils\";\nimport { Encoding } from \"./encoding\";\nexport class ByteBuffer {\n    /**\n     * Create a new ByteBuffer with a given array of bytes (`Uint8Array`)\n     */\n    constructor(bytes_) {\n        this.bytes_ = bytes_;\n        this.position_ = 0;\n    }\n    /**\n     * Create and allocate a new ByteBuffer with a given size.\n     */\n    static allocate(byte_size) {\n        return new ByteBuffer(new Uint8Array(byte_size));\n    }\n    clear() {\n        this.position_ = 0;\n    }\n    /**\n     * Get the underlying `Uint8Array`.\n     */\n    bytes() {\n        return this.bytes_;\n    }\n    /**\n     * Get the buffer's position.\n     */\n    position() {\n        return this.position_;\n    }\n    /**\n     * Set the buffer's position.\n     */\n    setPosition(position) {\n        this.position_ = position;\n    }\n    /**\n     * Get the buffer's capacity.\n     */\n    capacity() {\n        return this.bytes_.length;\n    }\n    readInt8(offset) {\n        return this.readUint8(offset) << 24 >> 24;\n    }\n    readUint8(offset) {\n        return this.bytes_[offset];\n    }\n    readInt16(offset) {\n        return this.readUint16(offset) << 16 >> 16;\n    }\n    readUint16(offset) {\n        return this.bytes_[offset] | this.bytes_[offset + 1] << 8;\n    }\n    readInt32(offset) {\n        return this.bytes_[offset] | this.bytes_[offset + 1] << 8 | this.bytes_[offset + 2] << 16 | this.bytes_[offset + 3] << 24;\n    }\n    readUint32(offset) {\n        return this.readInt32(offset) >>> 0;\n    }\n    readInt64(offset) {\n        return new Long(this.readInt32(offset), this.readInt32(offset + 4));\n    }\n    readUint64(offset) {\n        return new Long(this.readUint32(offset), this.readUint32(offset + 4));\n    }\n    readFloat32(offset) {\n        int32[0] = this.readInt32(offset);\n        return float32[0];\n    }\n    readFloat64(offset) {\n        int32[isLittleEndian ? 0 : 1] = this.readInt32(offset);\n        int32[isLittleEndian ? 1 : 0] = this.readInt32(offset + 4);\n        return float64[0];\n    }\n    writeInt8(offset, value) {\n        this.bytes_[offset] = value;\n    }\n    writeUint8(offset, value) {\n        this.bytes_[offset] = value;\n    }\n    writeInt16(offset, value) {\n        this.bytes_[offset] = value;\n        this.bytes_[offset + 1] = value >> 8;\n    }\n    writeUint16(offset, value) {\n        this.bytes_[offset] = value;\n        this.bytes_[offset + 1] = value >> 8;\n    }\n    writeInt32(offset, value) {\n        this.bytes_[offset] = value;\n        this.bytes_[offset + 1] = value >> 8;\n        this.bytes_[offset + 2] = value >> 16;\n        this.bytes_[offset + 3] = value >> 24;\n    }\n    writeUint32(offset, value) {\n        this.bytes_[offset] = value;\n        this.bytes_[offset + 1] = value >> 8;\n        this.bytes_[offset + 2] = value >> 16;\n        this.bytes_[offset + 3] = value >> 24;\n    }\n    writeInt64(offset, value) {\n        this.writeInt32(offset, value.low);\n        this.writeInt32(offset + 4, value.high);\n    }\n    writeUint64(offset, value) {\n        this.writeUint32(offset, value.low);\n        this.writeUint32(offset + 4, value.high);\n    }\n    writeFloat32(offset, value) {\n        float32[0] = value;\n        this.writeInt32(offset, int32[0]);\n    }\n    writeFloat64(offset, value) {\n        float64[0] = value;\n        this.writeInt32(offset, int32[isLittleEndian ? 0 : 1]);\n        this.writeInt32(offset + 4, int32[isLittleEndian ? 1 : 0]);\n    }\n    /**\n     * Return the file identifier.   Behavior is undefined for FlatBuffers whose\n     * schema does not include a file_identifier (likely points at padding or the\n     * start of a the root vtable).\n     */\n    getBufferIdentifier() {\n        if (this.bytes_.length < this.position_ + SIZEOF_INT +\n            FILE_IDENTIFIER_LENGTH) {\n            throw new Error('FlatBuffers: ByteBuffer is too short to contain an identifier.');\n        }\n        let result = \"\";\n        for (let i = 0; i < FILE_IDENTIFIER_LENGTH; i++) {\n            result += String.fromCharCode(this.readInt8(this.position_ + SIZEOF_INT + i));\n        }\n        return result;\n    }\n    /**\n     * Look up a field in the vtable, return an offset into the object, or 0 if the\n     * field is not present.\n     */\n    __offset(bb_pos, vtable_offset) {\n        const vtable = bb_pos - this.readInt32(bb_pos);\n        return vtable_offset < this.readInt16(vtable) ? this.readInt16(vtable + vtable_offset) : 0;\n    }\n    /**\n     * Initialize any Table-derived type to point to the union at the given offset.\n     */\n    __union(t, offset) {\n        t.bb_pos = offset + this.readInt32(offset);\n        t.bb = this;\n        return t;\n    }\n    /**\n     * Create a JavaScript string from UTF-8 data stored inside the FlatBuffer.\n     * This allocates a new string and converts to wide chars upon each access.\n     *\n     * To avoid the conversion to UTF-16, pass Encoding.UTF8_BYTES as\n     * the \"optionalEncoding\" argument. This is useful for avoiding conversion to\n     * and from UTF-16 when the data will just be packaged back up in another\n     * FlatBuffer later on.\n     *\n     * @param offset\n     * @param opt_encoding Defaults to UTF16_STRING\n     */\n    __string(offset, opt_encoding) {\n        offset += this.readInt32(offset);\n        const length = this.readInt32(offset);\n        let result = '';\n        let i = 0;\n        offset += SIZEOF_INT;\n        if (opt_encoding === Encoding.UTF8_BYTES) {\n            return this.bytes_.subarray(offset, offset + length);\n        }\n        while (i < length) {\n            let codePoint;\n            // Decode UTF-8\n            const a = this.readUint8(offset + i++);\n            if (a < 0xC0) {\n                codePoint = a;\n            }\n            else {\n                const b = this.readUint8(offset + i++);\n                if (a < 0xE0) {\n                    codePoint =\n                        ((a & 0x1F) << 6) |\n                            (b & 0x3F);\n                }\n                else {\n                    const c = this.readUint8(offset + i++);\n                    if (a < 0xF0) {\n                        codePoint =\n                            ((a & 0x0F) << 12) |\n                                ((b & 0x3F) << 6) |\n                                (c & 0x3F);\n                    }\n                    else {\n                        const d = this.readUint8(offset + i++);\n                        codePoint =\n                            ((a & 0x07) << 18) |\n                                ((b & 0x3F) << 12) |\n                                ((c & 0x3F) << 6) |\n                                (d & 0x3F);\n                    }\n                }\n            }\n            // Encode UTF-16\n            if (codePoint < 0x10000) {\n                result += String.fromCharCode(codePoint);\n            }\n            else {\n                codePoint -= 0x10000;\n                result += String.fromCharCode((codePoint >> 10) + 0xD800, (codePoint & ((1 << 10) - 1)) + 0xDC00);\n            }\n        }\n        return result;\n    }\n    /**\n     * Handle unions that can contain string as its member, if a Table-derived type then initialize it,\n     * if a string then return a new one\n     *\n     * WARNING: strings are immutable in JS so we can't change the string that the user gave us, this\n     * makes the behaviour of __union_with_string different compared to __union\n     */\n    __union_with_string(o, offset) {\n        if (typeof o === 'string') {\n            return this.__string(offset);\n        }\n        return this.__union(o, offset);\n    }\n    /**\n     * Retrieve the relative offset stored at \"offset\"\n     */\n    __indirect(offset) {\n        return offset + this.readInt32(offset);\n    }\n    /**\n     * Get the start of data of a vector whose offset is stored at \"offset\" in this object.\n     */\n    __vector(offset) {\n        return offset + this.readInt32(offset) + SIZEOF_INT; // data starts after the length\n    }\n    /**\n     * Get the length of a vector whose offset is stored at \"offset\" in this object.\n     */\n    __vector_len(offset) {\n        return this.readInt32(offset + this.readInt32(offset));\n    }\n    __has_identifier(ident) {\n        if (ident.length != FILE_IDENTIFIER_LENGTH) {\n            throw new Error('FlatBuffers: file identifier must be length ' +\n                FILE_IDENTIFIER_LENGTH);\n        }\n        for (let i = 0; i < FILE_IDENTIFIER_LENGTH; i++) {\n            if (ident.charCodeAt(i) != this.readInt8(this.position() + SIZEOF_INT + i)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * A helper function to avoid generated code depending on this file directly.\n     */\n    createLong(low, high) {\n        return Long.create(low, high);\n    }\n    /**\n     * A helper function for generating list for obj api\n     */\n    createScalarList(listAccessor, listLength) {\n        const ret = [];\n        for (let i = 0; i < listLength; ++i) {\n            if (listAccessor(i) !== null) {\n                ret.push(listAccessor(i));\n            }\n        }\n        return ret;\n    }\n    /**\n     * A helper function for generating list for obj api\n     * @param listAccessor function that accepts an index and return data at that index\n     * @param listLength listLength\n     * @param res result list\n     */\n    createObjList(listAccessor, listLength) {\n        const ret = [];\n        for (let i = 0; i < listLength; ++i) {\n            const val = listAccessor(i);\n            if (val !== null) {\n                ret.push(val.unpack());\n            }\n        }\n        return ret;\n    }\n}\n","import { ByteBuffer } from \"./byte-buffer\";\nimport { SIZEOF_SHORT, SIZE_PREFIX_LENGTH, SIZEOF_INT, FILE_IDENTIFIER_LENGTH } from \"./constants\";\nimport { Long } from \"./long\";\nexport class Builder {\n    /**\n     * Create a FlatBufferBuilder.\n     */\n    constructor(opt_initial_size) {\n        /** Minimum alignment encountered so far. */\n        this.minalign = 1;\n        /** The vtable for the current table. */\n        this.vtable = null;\n        /** The amount of fields we're actually using. */\n        this.vtable_in_use = 0;\n        /** Whether we are currently serializing a table. */\n        this.isNested = false;\n        /** Starting offset of the current struct/table. */\n        this.object_start = 0;\n        /** List of offsets of all vtables. */\n        this.vtables = [];\n        /** For the current vector being built. */\n        this.vector_num_elems = 0;\n        /** False omits default values from the serialized data */\n        this.force_defaults = false;\n        this.string_maps = null;\n        let initial_size;\n        if (!opt_initial_size) {\n            initial_size = 1024;\n        }\n        else {\n            initial_size = opt_initial_size;\n        }\n        /**\n         * @type {ByteBuffer}\n         * @private\n         */\n        this.bb = ByteBuffer.allocate(initial_size);\n        this.space = initial_size;\n    }\n    clear() {\n        this.bb.clear();\n        this.space = this.bb.capacity();\n        this.minalign = 1;\n        this.vtable = null;\n        this.vtable_in_use = 0;\n        this.isNested = false;\n        this.object_start = 0;\n        this.vtables = [];\n        this.vector_num_elems = 0;\n        this.force_defaults = false;\n        this.string_maps = null;\n    }\n    /**\n     * In order to save space, fields that are set to their default value\n     * don't get serialized into the buffer. Forcing defaults provides a\n     * way to manually disable this optimization.\n     *\n     * @param forceDefaults true always serializes default values\n     */\n    forceDefaults(forceDefaults) {\n        this.force_defaults = forceDefaults;\n    }\n    /**\n     * Get the ByteBuffer representing the FlatBuffer. Only call this after you've\n     * called finish(). The actual data starts at the ByteBuffer's current position,\n     * not necessarily at 0.\n     */\n    dataBuffer() {\n        return this.bb;\n    }\n    /**\n     * Get the bytes representing the FlatBuffer. Only call this after you've\n     * called finish().\n     */\n    asUint8Array() {\n        return this.bb.bytes().subarray(this.bb.position(), this.bb.position() + this.offset());\n    }\n    /**\n     * Prepare to write an element of `size` after `additional_bytes` have been\n     * written, e.g. if you write a string, you need to align such the int length\n     * field is aligned to 4 bytes, and the string data follows it directly. If all\n     * you need to do is alignment, `additional_bytes` will be 0.\n     *\n     * @param size This is the of the new element to write\n     * @param additional_bytes The padding size\n     */\n    prep(size, additional_bytes) {\n        // Track the biggest thing we've ever aligned to.\n        if (size > this.minalign) {\n            this.minalign = size;\n        }\n        // Find the amount of alignment needed such that `size` is properly\n        // aligned after `additional_bytes`\n        const align_size = ((~(this.bb.capacity() - this.space + additional_bytes)) + 1) & (size - 1);\n        // Reallocate the buffer if needed.\n        while (this.space < align_size + size + additional_bytes) {\n            const old_buf_size = this.bb.capacity();\n            this.bb = Builder.growByteBuffer(this.bb);\n            this.space += this.bb.capacity() - old_buf_size;\n        }\n        this.pad(align_size);\n    }\n    pad(byte_size) {\n        for (let i = 0; i < byte_size; i++) {\n            this.bb.writeInt8(--this.space, 0);\n        }\n    }\n    writeInt8(value) {\n        this.bb.writeInt8(this.space -= 1, value);\n    }\n    writeInt16(value) {\n        this.bb.writeInt16(this.space -= 2, value);\n    }\n    writeInt32(value) {\n        this.bb.writeInt32(this.space -= 4, value);\n    }\n    writeInt64(value) {\n        this.bb.writeInt64(this.space -= 8, value);\n    }\n    writeFloat32(value) {\n        this.bb.writeFloat32(this.space -= 4, value);\n    }\n    writeFloat64(value) {\n        this.bb.writeFloat64(this.space -= 8, value);\n    }\n    /**\n     * Add an `int8` to the buffer, properly aligned, and grows the buffer (if necessary).\n     * @param value The `int8` to add the the buffer.\n     */\n    addInt8(value) {\n        this.prep(1, 0);\n        this.writeInt8(value);\n    }\n    /**\n     * Add an `int16` to the buffer, properly aligned, and grows the buffer (if necessary).\n     * @param value The `int16` to add the the buffer.\n     */\n    addInt16(value) {\n        this.prep(2, 0);\n        this.writeInt16(value);\n    }\n    /**\n     * Add an `int32` to the buffer, properly aligned, and grows the buffer (if necessary).\n     * @param value The `int32` to add the the buffer.\n     */\n    addInt32(value) {\n        this.prep(4, 0);\n        this.writeInt32(value);\n    }\n    /**\n     * Add an `int64` to the buffer, properly aligned, and grows the buffer (if necessary).\n     * @param value The `int64` to add the the buffer.\n     */\n    addInt64(value) {\n        this.prep(8, 0);\n        this.writeInt64(value);\n    }\n    /**\n     * Add a `float32` to the buffer, properly aligned, and grows the buffer (if necessary).\n     * @param value The `float32` to add the the buffer.\n     */\n    addFloat32(value) {\n        this.prep(4, 0);\n        this.writeFloat32(value);\n    }\n    /**\n     * Add a `float64` to the buffer, properly aligned, and grows the buffer (if necessary).\n     * @param value The `float64` to add the the buffer.\n     */\n    addFloat64(value) {\n        this.prep(8, 0);\n        this.writeFloat64(value);\n    }\n    addFieldInt8(voffset, value, defaultValue) {\n        if (this.force_defaults || value != defaultValue) {\n            this.addInt8(value);\n            this.slot(voffset);\n        }\n    }\n    addFieldInt16(voffset, value, defaultValue) {\n        if (this.force_defaults || value != defaultValue) {\n            this.addInt16(value);\n            this.slot(voffset);\n        }\n    }\n    addFieldInt32(voffset, value, defaultValue) {\n        if (this.force_defaults || value != defaultValue) {\n            this.addInt32(value);\n            this.slot(voffset);\n        }\n    }\n    addFieldInt64(voffset, value, defaultValue) {\n        if (this.force_defaults || !value.equals(defaultValue)) {\n            this.addInt64(value);\n            this.slot(voffset);\n        }\n    }\n    addFieldFloat32(voffset, value, defaultValue) {\n        if (this.force_defaults || value != defaultValue) {\n            this.addFloat32(value);\n            this.slot(voffset);\n        }\n    }\n    addFieldFloat64(voffset, value, defaultValue) {\n        if (this.force_defaults || value != defaultValue) {\n            this.addFloat64(value);\n            this.slot(voffset);\n        }\n    }\n    addFieldOffset(voffset, value, defaultValue) {\n        if (this.force_defaults || value != defaultValue) {\n            this.addOffset(value);\n            this.slot(voffset);\n        }\n    }\n    /**\n     * Structs are stored inline, so nothing additional is being added. `d` is always 0.\n     */\n    addFieldStruct(voffset, value, defaultValue) {\n        if (value != defaultValue) {\n            this.nested(value);\n            this.slot(voffset);\n        }\n    }\n    /**\n     * Structures are always stored inline, they need to be created right\n     * where they're used.  You'll get this assertion failure if you\n     * created it elsewhere.\n     */\n    nested(obj) {\n        if (obj != this.offset()) {\n            throw new Error('FlatBuffers: struct must be serialized inline.');\n        }\n    }\n    /**\n     * Should not be creating any other object, string or vector\n     * while an object is being constructed\n     */\n    notNested() {\n        if (this.isNested) {\n            throw new Error('FlatBuffers: object serialization must not be nested.');\n        }\n    }\n    /**\n     * Set the current vtable at `voffset` to the current location in the buffer.\n     */\n    slot(voffset) {\n        if (this.vtable !== null)\n            this.vtable[voffset] = this.offset();\n    }\n    /**\n     * @returns Offset relative to the end of the buffer.\n     */\n    offset() {\n        return this.bb.capacity() - this.space;\n    }\n    /**\n     * Doubles the size of the backing ByteBuffer and copies the old data towards\n     * the end of the new buffer (since we build the buffer backwards).\n     *\n     * @param bb The current buffer with the existing data\n     * @returns A new byte buffer with the old data copied\n     * to it. The data is located at the end of the buffer.\n     *\n     * uint8Array.set() formally takes {Array<number>|ArrayBufferView}, so to pass\n     * it a uint8Array we need to suppress the type check:\n     * @suppress {checkTypes}\n     */\n    static growByteBuffer(bb) {\n        const old_buf_size = bb.capacity();\n        // Ensure we don't grow beyond what fits in an int.\n        if (old_buf_size & 0xC0000000) {\n            throw new Error('FlatBuffers: cannot grow buffer beyond 2 gigabytes.');\n        }\n        const new_buf_size = old_buf_size << 1;\n        const nbb = ByteBuffer.allocate(new_buf_size);\n        nbb.setPosition(new_buf_size - old_buf_size);\n        nbb.bytes().set(bb.bytes(), new_buf_size - old_buf_size);\n        return nbb;\n    }\n    /**\n     * Adds on offset, relative to where it will be written.\n     *\n     * @param offset The offset to add.\n     */\n    addOffset(offset) {\n        this.prep(SIZEOF_INT, 0); // Ensure alignment is already done.\n        this.writeInt32(this.offset() - offset + SIZEOF_INT);\n    }\n    /**\n     * Start encoding a new object in the buffer.  Users will not usually need to\n     * call this directly. The FlatBuffers compiler will generate helper methods\n     * that call this method internally.\n     */\n    startObject(numfields) {\n        this.notNested();\n        if (this.vtable == null) {\n            this.vtable = [];\n        }\n        this.vtable_in_use = numfields;\n        for (let i = 0; i < numfields; i++) {\n            this.vtable[i] = 0; // This will push additional elements as needed\n        }\n        this.isNested = true;\n        this.object_start = this.offset();\n    }\n    /**\n     * Finish off writing the object that is under construction.\n     *\n     * @returns The offset to the object inside `dataBuffer`\n     */\n    endObject() {\n        if (this.vtable == null || !this.isNested) {\n            throw new Error('FlatBuffers: endObject called without startObject');\n        }\n        this.addInt32(0);\n        const vtableloc = this.offset();\n        // Trim trailing zeroes.\n        let i = this.vtable_in_use - 1;\n        // eslint-disable-next-line no-empty\n        for (; i >= 0 && this.vtable[i] == 0; i--) { }\n        const trimmed_size = i + 1;\n        // Write out the current vtable.\n        for (; i >= 0; i--) {\n            // Offset relative to the start of the table.\n            this.addInt16(this.vtable[i] != 0 ? vtableloc - this.vtable[i] : 0);\n        }\n        const standard_fields = 2; // The fields below:\n        this.addInt16(vtableloc - this.object_start);\n        const len = (trimmed_size + standard_fields) * SIZEOF_SHORT;\n        this.addInt16(len);\n        // Search for an existing vtable that matches the current one.\n        let existing_vtable = 0;\n        const vt1 = this.space;\n        outer_loop: for (i = 0; i < this.vtables.length; i++) {\n            const vt2 = this.bb.capacity() - this.vtables[i];\n            if (len == this.bb.readInt16(vt2)) {\n                for (let j = SIZEOF_SHORT; j < len; j += SIZEOF_SHORT) {\n                    if (this.bb.readInt16(vt1 + j) != this.bb.readInt16(vt2 + j)) {\n                        continue outer_loop;\n                    }\n                }\n                existing_vtable = this.vtables[i];\n                break;\n            }\n        }\n        if (existing_vtable) {\n            // Found a match:\n            // Remove the current vtable.\n            this.space = this.bb.capacity() - vtableloc;\n            // Point table to existing vtable.\n            this.bb.writeInt32(this.space, existing_vtable - vtableloc);\n        }\n        else {\n            // No match:\n            // Add the location of the current vtable to the list of vtables.\n            this.vtables.push(this.offset());\n            // Point table to current vtable.\n            this.bb.writeInt32(this.bb.capacity() - vtableloc, this.offset() - vtableloc);\n        }\n        this.isNested = false;\n        return vtableloc;\n    }\n    /**\n     * Finalize a buffer, poiting to the given `root_table`.\n     */\n    finish(root_table, opt_file_identifier, opt_size_prefix) {\n        const size_prefix = opt_size_prefix ? SIZE_PREFIX_LENGTH : 0;\n        if (opt_file_identifier) {\n            const file_identifier = opt_file_identifier;\n            this.prep(this.minalign, SIZEOF_INT +\n                FILE_IDENTIFIER_LENGTH + size_prefix);\n            if (file_identifier.length != FILE_IDENTIFIER_LENGTH) {\n                throw new Error('FlatBuffers: file identifier must be length ' +\n                    FILE_IDENTIFIER_LENGTH);\n            }\n            for (let i = FILE_IDENTIFIER_LENGTH - 1; i >= 0; i--) {\n                this.writeInt8(file_identifier.charCodeAt(i));\n            }\n        }\n        this.prep(this.minalign, SIZEOF_INT + size_prefix);\n        this.addOffset(root_table);\n        if (size_prefix) {\n            this.addInt32(this.bb.capacity() - this.space);\n        }\n        this.bb.setPosition(this.space);\n    }\n    /**\n     * Finalize a size prefixed buffer, pointing to the given `root_table`.\n     */\n    finishSizePrefixed(root_table, opt_file_identifier) {\n        this.finish(root_table, opt_file_identifier, true);\n    }\n    /**\n     * This checks a required field has been set in a given table that has\n     * just been constructed.\n     */\n    requiredField(table, field) {\n        const table_start = this.bb.capacity() - table;\n        const vtable_start = table_start - this.bb.readInt32(table_start);\n        const ok = this.bb.readInt16(vtable_start + field) != 0;\n        // If this fails, the caller will show what field needs to be set.\n        if (!ok) {\n            throw new Error('FlatBuffers: field ' + field + ' must be set');\n        }\n    }\n    /**\n     * Start a new array/vector of objects.  Users usually will not call\n     * this directly. The FlatBuffers compiler will create a start/end\n     * method for vector types in generated code.\n     *\n     * @param elem_size The size of each element in the array\n     * @param num_elems The number of elements in the array\n     * @param alignment The alignment of the array\n     */\n    startVector(elem_size, num_elems, alignment) {\n        this.notNested();\n        this.vector_num_elems = num_elems;\n        this.prep(SIZEOF_INT, elem_size * num_elems);\n        this.prep(alignment, elem_size * num_elems); // Just in case alignment > int.\n    }\n    /**\n     * Finish off the creation of an array and all its elements. The array must be\n     * created with `startVector`.\n     *\n     * @returns The offset at which the newly created array\n     * starts.\n     */\n    endVector() {\n        this.writeInt32(this.vector_num_elems);\n        return this.offset();\n    }\n    /**\n     * Encode the string `s` in the buffer using UTF-8. If the string passed has\n     * already been seen, we return the offset of the already written string\n     *\n     * @param s The string to encode\n     * @return The offset in the buffer where the encoded string starts\n     */\n    createSharedString(s) {\n        if (!s) {\n            return 0;\n        }\n        if (!this.string_maps) {\n            this.string_maps = new Map();\n        }\n        if (this.string_maps.has(s)) {\n            return this.string_maps.get(s);\n        }\n        const offset = this.createString(s);\n        this.string_maps.set(s, offset);\n        return offset;\n    }\n    /**\n     * Encode the string `s` in the buffer using UTF-8. If a Uint8Array is passed\n     * instead of a string, it is assumed to contain valid UTF-8 encoded data.\n     *\n     * @param s The string to encode\n     * @return The offset in the buffer where the encoded string starts\n     */\n    createString(s) {\n        if (!s) {\n            return 0;\n        }\n        let utf8;\n        if (s instanceof Uint8Array) {\n            utf8 = s;\n        }\n        else {\n            utf8 = [];\n            let i = 0;\n            while (i < s.length) {\n                let codePoint;\n                // Decode UTF-16\n                const a = s.charCodeAt(i++);\n                if (a < 0xD800 || a >= 0xDC00) {\n                    codePoint = a;\n                }\n                else {\n                    const b = s.charCodeAt(i++);\n                    codePoint = (a << 10) + b + (0x10000 - (0xD800 << 10) - 0xDC00);\n                }\n                // Encode UTF-8\n                if (codePoint < 0x80) {\n                    utf8.push(codePoint);\n                }\n                else {\n                    if (codePoint < 0x800) {\n                        utf8.push(((codePoint >> 6) & 0x1F) | 0xC0);\n                    }\n                    else {\n                        if (codePoint < 0x10000) {\n                            utf8.push(((codePoint >> 12) & 0x0F) | 0xE0);\n                        }\n                        else {\n                            utf8.push(((codePoint >> 18) & 0x07) | 0xF0, ((codePoint >> 12) & 0x3F) | 0x80);\n                        }\n                        utf8.push(((codePoint >> 6) & 0x3F) | 0x80);\n                    }\n                    utf8.push((codePoint & 0x3F) | 0x80);\n                }\n            }\n        }\n        this.addInt8(0);\n        this.startVector(1, utf8.length, 1);\n        this.bb.setPosition(this.space -= utf8.length);\n        for (let i = 0, offset = this.space, bytes = this.bb.bytes(); i < utf8.length; i++) {\n            bytes[offset++] = utf8[i];\n        }\n        return this.endVector();\n    }\n    /**\n     * A helper function to avoid generated code depending on this file directly.\n     */\n    createLong(low, high) {\n        return Long.create(low, high);\n    }\n    /**\n     * A helper function to pack an object\n     *\n     * @returns offset of obj\n     */\n    createObjectOffset(obj) {\n        if (obj === null) {\n            return 0;\n        }\n        if (typeof obj === 'string') {\n            return this.createString(obj);\n        }\n        else {\n            return obj.pack(this);\n        }\n    }\n    /**\n     * A helper function to pack a list of object\n     *\n     * @returns list of offsets of each non null object\n     */\n    createObjectOffsetList(list) {\n        const ret = [];\n        for (let i = 0; i < list.length; ++i) {\n            const val = list[i];\n            if (val !== null) {\n                ret.push(this.createObjectOffset(val));\n            }\n            else {\n                throw new Error('FlatBuffers: Argument for createObjectOffsetList cannot contain null.');\n            }\n        }\n        return ret;\n    }\n    createStructOffsetList(list, startFunc) {\n        startFunc(this, list.length);\n        this.createObjectOffsetList(list);\n        return this.endVector();\n    }\n}\n","import * as flatbuffers from 'flatbuffers';\nimport { ColumnType } from '../flat-geobuf/column-type';\nexport class Column {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsColumn(bb, obj) {\n        return (obj || new Column()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsColumn(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Column()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    name(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    type() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.readUint8(this.bb_pos + offset) : ColumnType.Byte;\n    }\n    title(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    description(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    width() {\n        const offset = this.bb.__offset(this.bb_pos, 12);\n        return offset ? this.bb.readInt32(this.bb_pos + offset) : -1;\n    }\n    precision() {\n        const offset = this.bb.__offset(this.bb_pos, 14);\n        return offset ? this.bb.readInt32(this.bb_pos + offset) : -1;\n    }\n    scale() {\n        const offset = this.bb.__offset(this.bb_pos, 16);\n        return offset ? this.bb.readInt32(this.bb_pos + offset) : -1;\n    }\n    nullable() {\n        const offset = this.bb.__offset(this.bb_pos, 18);\n        return offset ? !!this.bb.readInt8(this.bb_pos + offset) : true;\n    }\n    unique() {\n        const offset = this.bb.__offset(this.bb_pos, 20);\n        return offset ? !!this.bb.readInt8(this.bb_pos + offset) : false;\n    }\n    primaryKey() {\n        const offset = this.bb.__offset(this.bb_pos, 22);\n        return offset ? !!this.bb.readInt8(this.bb_pos + offset) : false;\n    }\n    metadata(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 24);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    static startColumn(builder) {\n        builder.startObject(11);\n    }\n    static addName(builder, nameOffset) {\n        builder.addFieldOffset(0, nameOffset, 0);\n    }\n    static addType(builder, type) {\n        builder.addFieldInt8(1, type, ColumnType.Byte);\n    }\n    static addTitle(builder, titleOffset) {\n        builder.addFieldOffset(2, titleOffset, 0);\n    }\n    static addDescription(builder, descriptionOffset) {\n        builder.addFieldOffset(3, descriptionOffset, 0);\n    }\n    static addWidth(builder, width) {\n        builder.addFieldInt32(4, width, -1);\n    }\n    static addPrecision(builder, precision) {\n        builder.addFieldInt32(5, precision, -1);\n    }\n    static addScale(builder, scale) {\n        builder.addFieldInt32(6, scale, -1);\n    }\n    static addNullable(builder, nullable) {\n        builder.addFieldInt8(7, +nullable, +true);\n    }\n    static addUnique(builder, unique) {\n        builder.addFieldInt8(8, +unique, +false);\n    }\n    static addPrimaryKey(builder, primaryKey) {\n        builder.addFieldInt8(9, +primaryKey, +false);\n    }\n    static addMetadata(builder, metadataOffset) {\n        builder.addFieldOffset(10, metadataOffset, 0);\n    }\n    static endColumn(builder) {\n        const offset = builder.endObject();\n        builder.requiredField(offset, 4);\n        return offset;\n    }\n    static createColumn(builder, nameOffset, type, titleOffset, descriptionOffset, width, precision, scale, nullable, unique, primaryKey, metadataOffset) {\n        Column.startColumn(builder);\n        Column.addName(builder, nameOffset);\n        Column.addType(builder, type);\n        Column.addTitle(builder, titleOffset);\n        Column.addDescription(builder, descriptionOffset);\n        Column.addWidth(builder, width);\n        Column.addPrecision(builder, precision);\n        Column.addScale(builder, scale);\n        Column.addNullable(builder, nullable);\n        Column.addUnique(builder, unique);\n        Column.addPrimaryKey(builder, primaryKey);\n        Column.addMetadata(builder, metadataOffset);\n        return Column.endColumn(builder);\n    }\n}\n//# sourceMappingURL=column.js.map","import * as flatbuffers from 'flatbuffers';\nexport class Crs {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsCrs(bb, obj) {\n        return (obj || new Crs()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsCrs(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Crs()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    org(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    code() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.readInt32(this.bb_pos + offset) : 0;\n    }\n    name(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    description(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    wkt(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 12);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    codeString(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 14);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    static startCrs(builder) {\n        builder.startObject(6);\n    }\n    static addOrg(builder, orgOffset) {\n        builder.addFieldOffset(0, orgOffset, 0);\n    }\n    static addCode(builder, code) {\n        builder.addFieldInt32(1, code, 0);\n    }\n    static addName(builder, nameOffset) {\n        builder.addFieldOffset(2, nameOffset, 0);\n    }\n    static addDescription(builder, descriptionOffset) {\n        builder.addFieldOffset(3, descriptionOffset, 0);\n    }\n    static addWkt(builder, wktOffset) {\n        builder.addFieldOffset(4, wktOffset, 0);\n    }\n    static addCodeString(builder, codeStringOffset) {\n        builder.addFieldOffset(5, codeStringOffset, 0);\n    }\n    static endCrs(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createCrs(builder, orgOffset, code, nameOffset, descriptionOffset, wktOffset, codeStringOffset) {\n        Crs.startCrs(builder);\n        Crs.addOrg(builder, orgOffset);\n        Crs.addCode(builder, code);\n        Crs.addName(builder, nameOffset);\n        Crs.addDescription(builder, descriptionOffset);\n        Crs.addWkt(builder, wktOffset);\n        Crs.addCodeString(builder, codeStringOffset);\n        return Crs.endCrs(builder);\n    }\n}\n//# sourceMappingURL=crs.js.map","import * as flatbuffers from 'flatbuffers';\nimport { Column } from '../flat-geobuf/column';\nimport { Crs } from '../flat-geobuf/crs';\nimport { GeometryType } from '../flat-geobuf/geometry-type';\nexport class Header {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsHeader(bb, obj) {\n        return (obj || new Header()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsHeader(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Header()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    name(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    envelope(index) {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.readFloat64(this.bb.__vector(this.bb_pos + offset) + index * 8) : 0;\n    }\n    envelopeLength() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    envelopeArray() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? new Float64Array(this.bb.bytes().buffer, this.bb.bytes().byteOffset + this.bb.__vector(this.bb_pos + offset), this.bb.__vector_len(this.bb_pos + offset)) : null;\n    }\n    geometryType() {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? this.bb.readUint8(this.bb_pos + offset) : GeometryType.Unknown;\n    }\n    hasZ() {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? !!this.bb.readInt8(this.bb_pos + offset) : false;\n    }\n    hasM() {\n        const offset = this.bb.__offset(this.bb_pos, 12);\n        return offset ? !!this.bb.readInt8(this.bb_pos + offset) : false;\n    }\n    hasT() {\n        const offset = this.bb.__offset(this.bb_pos, 14);\n        return offset ? !!this.bb.readInt8(this.bb_pos + offset) : false;\n    }\n    hasTm() {\n        const offset = this.bb.__offset(this.bb_pos, 16);\n        return offset ? !!this.bb.readInt8(this.bb_pos + offset) : false;\n    }\n    columns(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 18);\n        return offset ? (obj || new Column()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos + offset) + index * 4), this.bb) : null;\n    }\n    columnsLength() {\n        const offset = this.bb.__offset(this.bb_pos, 18);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    featuresCount() {\n        const offset = this.bb.__offset(this.bb_pos, 20);\n        return offset ? this.bb.readUint64(this.bb_pos + offset) : this.bb.createLong(0, 0);\n    }\n    indexNodeSize() {\n        const offset = this.bb.__offset(this.bb_pos, 22);\n        return offset ? this.bb.readUint16(this.bb_pos + offset) : 16;\n    }\n    crs(obj) {\n        const offset = this.bb.__offset(this.bb_pos, 24);\n        return offset ? (obj || new Crs()).__init(this.bb.__indirect(this.bb_pos + offset), this.bb) : null;\n    }\n    title(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 26);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    description(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 28);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    metadata(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 30);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    static startHeader(builder) {\n        builder.startObject(14);\n    }\n    static addName(builder, nameOffset) {\n        builder.addFieldOffset(0, nameOffset, 0);\n    }\n    static addEnvelope(builder, envelopeOffset) {\n        builder.addFieldOffset(1, envelopeOffset, 0);\n    }\n    static createEnvelopeVector(builder, data) {\n        builder.startVector(8, data.length, 8);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addFloat64(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startEnvelopeVector(builder, numElems) {\n        builder.startVector(8, numElems, 8);\n    }\n    static addGeometryType(builder, geometryType) {\n        builder.addFieldInt8(2, geometryType, GeometryType.Unknown);\n    }\n    static addHasZ(builder, hasZ) {\n        builder.addFieldInt8(3, +hasZ, +false);\n    }\n    static addHasM(builder, hasM) {\n        builder.addFieldInt8(4, +hasM, +false);\n    }\n    static addHasT(builder, hasT) {\n        builder.addFieldInt8(5, +hasT, +false);\n    }\n    static addHasTm(builder, hasTm) {\n        builder.addFieldInt8(6, +hasTm, +false);\n    }\n    static addColumns(builder, columnsOffset) {\n        builder.addFieldOffset(7, columnsOffset, 0);\n    }\n    static createColumnsVector(builder, data) {\n        builder.startVector(4, data.length, 4);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addOffset(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startColumnsVector(builder, numElems) {\n        builder.startVector(4, numElems, 4);\n    }\n    static addFeaturesCount(builder, featuresCount) {\n        builder.addFieldInt64(8, featuresCount, builder.createLong(0, 0));\n    }\n    static addIndexNodeSize(builder, indexNodeSize) {\n        builder.addFieldInt16(9, indexNodeSize, 16);\n    }\n    static addCrs(builder, crsOffset) {\n        builder.addFieldOffset(10, crsOffset, 0);\n    }\n    static addTitle(builder, titleOffset) {\n        builder.addFieldOffset(11, titleOffset, 0);\n    }\n    static addDescription(builder, descriptionOffset) {\n        builder.addFieldOffset(12, descriptionOffset, 0);\n    }\n    static addMetadata(builder, metadataOffset) {\n        builder.addFieldOffset(13, metadataOffset, 0);\n    }\n    static endHeader(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static finishHeaderBuffer(builder, offset) {\n        builder.finish(offset);\n    }\n    static finishSizePrefixedHeaderBuffer(builder, offset) {\n        builder.finish(offset, undefined, true);\n    }\n}\n//# sourceMappingURL=header.js.map","import ColumnMeta from './ColumnMeta';\nimport CrsMeta from './CrsMeta';\nimport { Header } from './flat-geobuf/header';\nexport default class HeaderMeta {\n    constructor(geometryType, columns, featuresCount, indexNodeSize, crs, title, description, metadata) {\n        this.geometryType = geometryType;\n        this.columns = columns;\n        this.featuresCount = featuresCount;\n        this.indexNodeSize = indexNodeSize;\n        this.crs = crs;\n        this.title = title;\n        this.description = description;\n        this.metadata = metadata;\n    }\n    static fromByteBuffer(bb) {\n        const header = Header.getRootAsHeader(bb);\n        const featuresCount = header.featuresCount().toFloat64();\n        const indexNodeSize = header.indexNodeSize();\n        const columns = [];\n        for (let j = 0; j < header.columnsLength(); j++) {\n            const column = header.columns(j);\n            if (!column)\n                throw new Error('Column unexpectedly missing');\n            if (!column.name())\n                throw new Error('Column name unexpectedly missing');\n            columns.push(new ColumnMeta(column.name(), column.type(), column.title(), column.description(), column.width(), column.precision(), column.scale(), column.nullable(), column.unique(), column.primaryKey()));\n        }\n        const crs = header.crs();\n        const crsMeta = crs\n            ? new CrsMeta(crs.org(), crs.code(), crs.name(), crs.description(), crs.wkt(), crs.codeString())\n            : null;\n        const headerMeta = new HeaderMeta(header.geometryType(), columns, featuresCount, indexNodeSize, crsMeta, header.title(), header.description(), header.metadata());\n        return headerMeta;\n    }\n}\n//# sourceMappingURL=HeaderMeta.js.map","import * as flatbuffers from 'flatbuffers';\nimport { GeometryType } from '../flat-geobuf/geometry-type';\nexport class Geometry {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsGeometry(bb, obj) {\n        return (obj || new Geometry()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsGeometry(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Geometry()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    ends(index) {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readUint32(this.bb.__vector(this.bb_pos + offset) + index * 4) : 0;\n    }\n    endsLength() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    endsArray() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? new Uint32Array(this.bb.bytes().buffer, this.bb.bytes().byteOffset + this.bb.__vector(this.bb_pos + offset), this.bb.__vector_len(this.bb_pos + offset)) : null;\n    }\n    xy(index) {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.readFloat64(this.bb.__vector(this.bb_pos + offset) + index * 8) : 0;\n    }\n    xyLength() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    xyArray() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? new Float64Array(this.bb.bytes().buffer, this.bb.bytes().byteOffset + this.bb.__vector(this.bb_pos + offset), this.bb.__vector_len(this.bb_pos + offset)) : null;\n    }\n    z(index) {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? this.bb.readFloat64(this.bb.__vector(this.bb_pos + offset) + index * 8) : 0;\n    }\n    zLength() {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    zArray() {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? new Float64Array(this.bb.bytes().buffer, this.bb.bytes().byteOffset + this.bb.__vector(this.bb_pos + offset), this.bb.__vector_len(this.bb_pos + offset)) : null;\n    }\n    m(index) {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? this.bb.readFloat64(this.bb.__vector(this.bb_pos + offset) + index * 8) : 0;\n    }\n    mLength() {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    mArray() {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? new Float64Array(this.bb.bytes().buffer, this.bb.bytes().byteOffset + this.bb.__vector(this.bb_pos + offset), this.bb.__vector_len(this.bb_pos + offset)) : null;\n    }\n    t(index) {\n        const offset = this.bb.__offset(this.bb_pos, 12);\n        return offset ? this.bb.readFloat64(this.bb.__vector(this.bb_pos + offset) + index * 8) : 0;\n    }\n    tLength() {\n        const offset = this.bb.__offset(this.bb_pos, 12);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    tArray() {\n        const offset = this.bb.__offset(this.bb_pos, 12);\n        return offset ? new Float64Array(this.bb.bytes().buffer, this.bb.bytes().byteOffset + this.bb.__vector(this.bb_pos + offset), this.bb.__vector_len(this.bb_pos + offset)) : null;\n    }\n    tm(index) {\n        const offset = this.bb.__offset(this.bb_pos, 14);\n        return offset ? this.bb.readUint64(this.bb.__vector(this.bb_pos + offset) + index * 8) : this.bb.createLong(0, 0);\n    }\n    tmLength() {\n        const offset = this.bb.__offset(this.bb_pos, 14);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    type() {\n        const offset = this.bb.__offset(this.bb_pos, 16);\n        return offset ? this.bb.readUint8(this.bb_pos + offset) : GeometryType.Unknown;\n    }\n    parts(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 18);\n        return offset ? (obj || new Geometry()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos + offset) + index * 4), this.bb) : null;\n    }\n    partsLength() {\n        const offset = this.bb.__offset(this.bb_pos, 18);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    static startGeometry(builder) {\n        builder.startObject(8);\n    }\n    static addEnds(builder, endsOffset) {\n        builder.addFieldOffset(0, endsOffset, 0);\n    }\n    static createEndsVector(builder, data) {\n        builder.startVector(4, data.length, 4);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addInt32(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startEndsVector(builder, numElems) {\n        builder.startVector(4, numElems, 4);\n    }\n    static addXy(builder, xyOffset) {\n        builder.addFieldOffset(1, xyOffset, 0);\n    }\n    static createXyVector(builder, data) {\n        builder.startVector(8, data.length, 8);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addFloat64(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startXyVector(builder, numElems) {\n        builder.startVector(8, numElems, 8);\n    }\n    static addZ(builder, zOffset) {\n        builder.addFieldOffset(2, zOffset, 0);\n    }\n    static createZVector(builder, data) {\n        builder.startVector(8, data.length, 8);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addFloat64(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startZVector(builder, numElems) {\n        builder.startVector(8, numElems, 8);\n    }\n    static addM(builder, mOffset) {\n        builder.addFieldOffset(3, mOffset, 0);\n    }\n    static createMVector(builder, data) {\n        builder.startVector(8, data.length, 8);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addFloat64(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startMVector(builder, numElems) {\n        builder.startVector(8, numElems, 8);\n    }\n    static addT(builder, tOffset) {\n        builder.addFieldOffset(4, tOffset, 0);\n    }\n    static createTVector(builder, data) {\n        builder.startVector(8, data.length, 8);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addFloat64(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startTVector(builder, numElems) {\n        builder.startVector(8, numElems, 8);\n    }\n    static addTm(builder, tmOffset) {\n        builder.addFieldOffset(5, tmOffset, 0);\n    }\n    static createTmVector(builder, data) {\n        builder.startVector(8, data.length, 8);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addInt64(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startTmVector(builder, numElems) {\n        builder.startVector(8, numElems, 8);\n    }\n    static addType(builder, type) {\n        builder.addFieldInt8(6, type, GeometryType.Unknown);\n    }\n    static addParts(builder, partsOffset) {\n        builder.addFieldOffset(7, partsOffset, 0);\n    }\n    static createPartsVector(builder, data) {\n        builder.startVector(4, data.length, 4);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addOffset(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startPartsVector(builder, numElems) {\n        builder.startVector(4, numElems, 4);\n    }\n    static endGeometry(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createGeometry(builder, endsOffset, xyOffset, zOffset, mOffset, tOffset, tmOffset, type, partsOffset) {\n        Geometry.startGeometry(builder);\n        Geometry.addEnds(builder, endsOffset);\n        Geometry.addXy(builder, xyOffset);\n        Geometry.addZ(builder, zOffset);\n        Geometry.addM(builder, mOffset);\n        Geometry.addT(builder, tOffset);\n        Geometry.addTm(builder, tmOffset);\n        Geometry.addType(builder, type);\n        Geometry.addParts(builder, partsOffset);\n        return Geometry.endGeometry(builder);\n    }\n}\n//# sourceMappingURL=geometry.js.map","import { GeometryType } from '../flat-geobuf/geometry-type';\nimport { Geometry } from '../flat-geobuf/geometry';\nexport function buildGeometry(builder, parsedGeometry) {\n    const { xy, z, ends, parts, type } = parsedGeometry;\n    if (parts) {\n        const partOffsets = parts.map((part) => buildGeometry(builder, part));\n        const partsOffset = Geometry.createPartsVector(builder, partOffsets);\n        Geometry.startGeometry(builder);\n        Geometry.addParts(builder, partsOffset);\n        return Geometry.endGeometry(builder);\n    }\n    const xyOffset = Geometry.createXyVector(builder, xy);\n    let zOffset;\n    if (z)\n        zOffset = Geometry.createZVector(builder, z);\n    let endsOffset;\n    if (ends)\n        endsOffset = Geometry.createEndsVector(builder, ends);\n    Geometry.startGeometry(builder);\n    if (endsOffset)\n        Geometry.addEnds(builder, endsOffset);\n    Geometry.addXy(builder, xyOffset);\n    if (zOffset)\n        Geometry.addZ(builder, zOffset);\n    Geometry.addType(builder, type);\n    return Geometry.endGeometry(builder);\n}\nexport function flat(a, xy, z) {\n    if (a.length === 0)\n        return;\n    if (Array.isArray(a[0])) {\n        for (const sa of a)\n            flat(sa, xy, z);\n    }\n    else {\n        if (a.length === 2)\n            xy.push(...a);\n        else {\n            xy.push(a[0], a[1]);\n            z.push(a[2]);\n        }\n    }\n}\nexport function parseGeometry(geometry, type) {\n    let xy;\n    let ends;\n    let parts;\n    if (type === GeometryType.MultiLineString) {\n        if (geometry.getFlatCoordinates)\n            xy = geometry.getFlatCoordinates();\n        const mlsEnds = geometry.getEnds();\n        if (mlsEnds.length > 1)\n            ends = mlsEnds.map((e) => e >> 1);\n    }\n    else if (type === GeometryType.Polygon) {\n        if (geometry.getFlatCoordinates)\n            xy = geometry.getFlatCoordinates();\n        const pEnds = geometry.getEnds();\n        if (pEnds.length > 1)\n            ends = pEnds.map((e) => e >> 1);\n    }\n    else if (type === GeometryType.MultiPolygon) {\n        const mp = geometry;\n        parts = mp\n            .getPolygons()\n            .map((p) => parseGeometry(p, GeometryType.Polygon));\n    }\n    else {\n        if (geometry.getFlatCoordinates)\n            xy = geometry.getFlatCoordinates();\n    }\n    return {\n        xy,\n        ends,\n        type,\n        parts,\n    };\n}\nexport function pairFlatCoordinates(xy, z) {\n    const newArray = [];\n    for (let i = 0; i < xy.length; i += 2) {\n        const a = [xy[i], xy[i + 1]];\n        if (z)\n            a.push(z[i >> 1]);\n        newArray.push(a);\n    }\n    return newArray;\n}\nexport function toGeometryType(name) {\n    if (!name)\n        return GeometryType.Unknown;\n    const type = GeometryType[name];\n    return type;\n}\n//# sourceMappingURL=geometry.js.map","import { GeometryType } from '../flat-geobuf/geometry-type';\nimport { flat, pairFlatCoordinates, toGeometryType, } from '../generic/geometry';\nexport function parseGeometry(geometry) {\n    const cs = geometry.coordinates;\n    const xy = [];\n    const z = [];\n    let ends;\n    let parts;\n    const type = toGeometryType(geometry.type);\n    let end = 0;\n    switch (geometry.type) {\n        case 'Point':\n            flat(cs, xy, z);\n            break;\n        case 'MultiPoint':\n        case 'LineString':\n            flat(cs, xy, z);\n            break;\n        case 'MultiLineString':\n        case 'Polygon': {\n            const css = cs;\n            flat(css, xy, z);\n            if (css.length > 1)\n                ends = css.map((c) => (end += c.length));\n            break;\n        }\n        case 'MultiPolygon': {\n            const csss = cs;\n            const geometries = csss.map((coordinates) => ({\n                type: 'Polygon',\n                coordinates,\n            }));\n            parts = geometries.map(parseGeometry);\n            break;\n        }\n        case 'GeometryCollection':\n            if (geometry.geometries)\n                parts = geometry.geometries.map(parseGeometry);\n            break;\n    }\n    return {\n        xy,\n        z: z.length > 0 ? z : undefined,\n        ends,\n        type,\n        parts,\n    };\n}\nfunction extractParts(xy, z, ends) {\n    if (!ends || ends.length === 0)\n        return [pairFlatCoordinates(xy, z)];\n    let s = 0;\n    const xySlices = Array.from(ends).map((e) => xy.slice(s, (s = e << 1)));\n    let zSlices;\n    if (z) {\n        s = 0;\n        zSlices = Array.from(ends).map((e) => z.slice(s, (s = e)));\n    }\n    return xySlices.map((xy, i) => pairFlatCoordinates(xy, zSlices ? zSlices[i] : undefined));\n}\nfunction toGeoJsonCoordinates(geometry, type) {\n    const xy = geometry.xyArray();\n    const z = geometry.zArray();\n    switch (type) {\n        case GeometryType.Point: {\n            const a = Array.from(xy);\n            if (z)\n                a.push(z[0]);\n            return a;\n        }\n        case GeometryType.MultiPoint:\n        case GeometryType.LineString:\n            return pairFlatCoordinates(xy, z);\n        case GeometryType.MultiLineString:\n            return extractParts(xy, z, geometry.endsArray());\n        case GeometryType.Polygon:\n            return extractParts(xy, z, geometry.endsArray());\n    }\n}\nexport function fromGeometry(geometry, type) {\n    if (type === GeometryType.GeometryCollection) {\n        const geometries = [];\n        for (let i = 0; i < geometry.partsLength(); i++) {\n            const part = geometry.parts(i);\n            const partType = part.type();\n            geometries.push(fromGeometry(part, partType));\n        }\n        return {\n            type: GeometryType[type],\n            geometries,\n        };\n    }\n    else if (type === GeometryType.MultiPolygon) {\n        const geometries = [];\n        for (let i = 0; i < geometry.partsLength(); i++)\n            geometries.push(fromGeometry(geometry.parts(i), GeometryType.Polygon));\n        return {\n            type: GeometryType[type],\n            coordinates: geometries.map((g) => g.coordinates),\n        };\n    }\n    const coordinates = toGeoJsonCoordinates(geometry, type);\n    return {\n        type: GeometryType[type],\n        coordinates,\n    };\n}\n//# sourceMappingURL=geometry.js.map","import * as flatbuffers from 'flatbuffers';\nimport { Column } from '../flat-geobuf/column';\nimport { Geometry } from '../flat-geobuf/geometry';\nexport class Feature {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsFeature(bb, obj) {\n        return (obj || new Feature()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsFeature(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Feature()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    geometry(obj) {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? (obj || new Geometry()).__init(this.bb.__indirect(this.bb_pos + offset), this.bb) : null;\n    }\n    properties(index) {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.readUint8(this.bb.__vector(this.bb_pos + offset) + index) : 0;\n    }\n    propertiesLength() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    propertiesArray() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? new Uint8Array(this.bb.bytes().buffer, this.bb.bytes().byteOffset + this.bb.__vector(this.bb_pos + offset), this.bb.__vector_len(this.bb_pos + offset)) : null;\n    }\n    columns(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? (obj || new Column()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos + offset) + index * 4), this.bb) : null;\n    }\n    columnsLength() {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    static startFeature(builder) {\n        builder.startObject(3);\n    }\n    static addGeometry(builder, geometryOffset) {\n        builder.addFieldOffset(0, geometryOffset, 0);\n    }\n    static addProperties(builder, propertiesOffset) {\n        builder.addFieldOffset(1, propertiesOffset, 0);\n    }\n    static createPropertiesVector(builder, data) {\n        builder.startVector(1, data.length, 1);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addInt8(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startPropertiesVector(builder, numElems) {\n        builder.startVector(1, numElems, 1);\n    }\n    static addColumns(builder, columnsOffset) {\n        builder.addFieldOffset(2, columnsOffset, 0);\n    }\n    static createColumnsVector(builder, data) {\n        builder.startVector(4, data.length, 4);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addOffset(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startColumnsVector(builder, numElems) {\n        builder.startVector(4, numElems, 4);\n    }\n    static endFeature(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static finishFeatureBuffer(builder, offset) {\n        builder.finish(offset);\n    }\n    static finishSizePrefixedFeatureBuffer(builder, offset) {\n        builder.finish(offset, undefined, true);\n    }\n    static createFeature(builder, geometryOffset, propertiesOffset, columnsOffset) {\n        Feature.startFeature(builder);\n        Feature.addGeometry(builder, geometryOffset);\n        Feature.addProperties(builder, propertiesOffset);\n        Feature.addColumns(builder, columnsOffset);\n        return Feature.endFeature(builder);\n    }\n}\n//# sourceMappingURL=feature.js.map","import * as flatbuffers from 'flatbuffers';\nimport { ColumnType } from '../flat-geobuf/column-type';\nimport { Feature } from '../flat-geobuf/feature';\nimport { buildGeometry, } from './geometry';\nconst textEncoder = new TextEncoder();\nconst textDecoder = new TextDecoder();\nexport function fromFeature(feature, header, createGeometry, createFeature) {\n    const columns = header.columns;\n    const geometry = feature.geometry();\n    const simpleGeometry = createGeometry(geometry, header.geometryType);\n    const properties = parseProperties(feature, columns);\n    return createFeature(simpleGeometry, properties);\n}\nexport function buildFeature(geometry, properties, header) {\n    const columns = header.columns;\n    const builder = new flatbuffers.Builder();\n    let offset = 0;\n    let capacity = 1024;\n    let bytes = new Uint8Array(capacity);\n    let view = new DataView(bytes.buffer);\n    const prep = function (size) {\n        if (offset + size < capacity)\n            return;\n        capacity = capacity * 2;\n        const newBytes = new Uint8Array(capacity);\n        newBytes.set(bytes);\n        bytes = newBytes;\n        view = new DataView(bytes.buffer, offset);\n    };\n    if (columns) {\n        for (let i = 0; i < columns.length; i++) {\n            const column = columns[i];\n            const value = properties[column.name];\n            if (value === null)\n                continue;\n            view.setUint16(offset, i, true);\n            offset += 2;\n            switch (column.type) {\n                case ColumnType.Bool:\n                    prep(1);\n                    view.setUint8(offset, value);\n                    offset += 1;\n                    break;\n                case ColumnType.Short:\n                    prep(2);\n                    view.setInt16(offset, value, true);\n                    offset += 2;\n                    break;\n                case ColumnType.UShort:\n                    prep(2);\n                    view.setUint16(offset, value, true);\n                    offset += 2;\n                    break;\n                case ColumnType.Int:\n                    prep(4);\n                    view.setInt32(offset, value, true);\n                    offset += 4;\n                    break;\n                case ColumnType.UInt:\n                    prep(4);\n                    view.setUint32(offset, value, true);\n                    offset += 4;\n                    break;\n                case ColumnType.Long:\n                    prep(8);\n                    view.setBigInt64(offset, BigInt(value), true);\n                    offset += 8;\n                    break;\n                case ColumnType.Double:\n                    prep(8);\n                    view.setFloat64(offset, value, true);\n                    offset += 8;\n                    break;\n                case ColumnType.DateTime:\n                case ColumnType.String: {\n                    const str = textEncoder.encode(value);\n                    prep(4);\n                    view.setUint32(offset, str.length, true);\n                    offset += 4;\n                    prep(str.length);\n                    bytes.set(str, offset);\n                    offset += str.length;\n                    break;\n                }\n                default:\n                    throw new Error('Unknown type ' + column.type);\n            }\n        }\n    }\n    let propertiesOffset = null;\n    if (offset > 0)\n        propertiesOffset = Feature.createPropertiesVector(builder, bytes.slice(0, offset));\n    const geometryOffset = buildGeometry(builder, geometry);\n    Feature.startFeature(builder);\n    Feature.addGeometry(builder, geometryOffset);\n    if (propertiesOffset)\n        Feature.addProperties(builder, propertiesOffset);\n    const featureOffset = Feature.endFeature(builder);\n    builder.finishSizePrefixed(featureOffset);\n    return builder.asUint8Array();\n}\nexport function parseProperties(feature, columns) {\n    const properties = {};\n    if (!columns || columns.length === 0)\n        return properties;\n    const array = feature.propertiesArray();\n    if (!array)\n        return properties;\n    const view = new DataView(array.buffer, array.byteOffset);\n    const length = feature.propertiesLength();\n    let offset = 0;\n    while (offset < length) {\n        const i = view.getUint16(offset, true);\n        offset += 2;\n        const column = columns[i];\n        const name = column.name;\n        switch (column.type) {\n            case ColumnType.Bool: {\n                properties[name] = !!view.getUint8(offset);\n                offset += 1;\n                break;\n            }\n            case ColumnType.Byte: {\n                properties[name] = view.getInt8(offset);\n                offset += 1;\n                break;\n            }\n            case ColumnType.UByte: {\n                properties[name] = view.getUint8(offset);\n                offset += 1;\n                break;\n            }\n            case ColumnType.Short: {\n                properties[name] = view.getInt16(offset, true);\n                offset += 2;\n                break;\n            }\n            case ColumnType.UShort: {\n                properties[name] = view.getUint16(offset, true);\n                offset += 2;\n                break;\n            }\n            case ColumnType.Int: {\n                properties[name] = view.getInt32(offset, true);\n                offset += 4;\n                break;\n            }\n            case ColumnType.UInt: {\n                properties[name] = view.getUint32(offset, true);\n                offset += 4;\n                break;\n            }\n            case ColumnType.Long: {\n                properties[name] = Number(view.getBigInt64(offset, true));\n                offset += 8;\n                break;\n            }\n            case ColumnType.ULong: {\n                properties[name] = Number(view.getBigUint64(offset, true));\n                offset += 8;\n                break;\n            }\n            case ColumnType.Double: {\n                properties[name] = view.getFloat64(offset, true);\n                offset += 8;\n                break;\n            }\n            case ColumnType.DateTime:\n            case ColumnType.String: {\n                const length = view.getUint32(offset, true);\n                offset += 4;\n                properties[name] = textDecoder.decode(array.subarray(offset, offset + length));\n                offset += length;\n                break;\n            }\n            default:\n                throw new Error('Unknown type ' + column.type);\n        }\n    }\n    return properties;\n}\n//# sourceMappingURL=feature.js.map","import { fromGeometry } from './geometry';\nimport { parseProperties } from '../generic/feature';\nexport function fromFeature(feature, header) {\n    const columns = header.columns;\n    const geometry = fromGeometry(feature.geometry(), header.geometryType);\n    const geoJsonfeature = {\n        type: 'Feature',\n        geometry,\n    };\n    if (columns && columns.length > 0)\n        geoJsonfeature.properties = parseProperties(feature, columns);\n    return geoJsonfeature;\n}\n//# sourceMappingURL=feature.js.map","export default new Uint8Array(0);\n","export default function concat(a, b) {\n  if (!a.length) return b;\n  if (!b.length) return a;\n  var c = new Uint8Array(a.length + b.length);\n  c.set(a);\n  c.set(b, a.length);\n  return c;\n}\n","import empty from \"./empty\";\nimport slice_cancel from \"./cancel\";\nimport slice_read from \"./read\";\nimport slice_slice from \"./slice\";\n\nexport default function slice(source) {\n  return typeof source.slice === \"function\" ? source :\n      new SliceSource(typeof source.read === \"function\" ? source\n          : source.getReader());\n}\n\nfunction SliceSource(source) {\n  this._source = source;\n  this._array = empty;\n  this._index = 0;\n}\n\nSliceSource.prototype.read = slice_read;\nSliceSource.prototype.slice = slice_slice;\nSliceSource.prototype.cancel = slice_cancel;\n","import concat from \"./concat\";\nimport empty from \"./empty\";\n\nexport default function() {\n  var that = this, array = that._array.subarray(that._index);\n  return that._source.read().then(function(result) {\n    that._array = empty;\n    that._index = 0;\n    return result.done ? (array.length > 0\n        ? {done: false, value: array}\n        : {done: true, value: undefined})\n        : {done: false, value: concat(array, result.value)};\n  });\n}\n","import empty from \"./empty\";\n\nexport default function(length) {\n  if ((length |= 0) < 0) throw new Error(\"invalid length\");\n  var that = this, index = this._array.length - this._index;\n\n  // If the request fits within the remaining buffer, resolve it immediately.\n  if (this._index + length <= this._array.length) {\n    return Promise.resolve(this._array.subarray(this._index, this._index += length));\n  }\n\n  // Otherwise, read chunks repeatedly until the request is fulfilled.\n  var array = new Uint8Array(length);\n  array.set(this._array.subarray(this._index));\n  return (function read() {\n    return that._source.read().then(function(result) {\n\n      // When done, its possible the request wasnt fully fullfilled!\n      // If so, the pre-allocated array is too big and needs slicing.\n      if (result.done) {\n        that._array = empty;\n        that._index = 0;\n        return index > 0 ? array.subarray(0, index) : null;\n      }\n\n      // If this chunk fulfills the request, return the resulting array.\n      if (index + result.value.length >= length) {\n        that._array = result.value;\n        that._index = length - index;\n        array.set(result.value.subarray(0, length - index), index);\n        return array;\n      }\n\n      // Otherwise copy this chunk into the array, then read the next chunk.\n      array.set(result.value, index);\n      index += result.value.length;\n      return read();\n    });\n  })();\n}\n","export default function() {\n  return this._source.cancel();\n}\n","/// <reference types=\"./repeater.d.ts\" />\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\n\n/** An error subclass which is thrown when there are too many pending push or next operations on a single repeater. */\r\nvar RepeaterOverflowError = /** @class */ (function (_super) {\r\n    __extends(RepeaterOverflowError, _super);\r\n    function RepeaterOverflowError(message) {\r\n        var _this = _super.call(this, message) || this;\r\n        Object.defineProperty(_this, \"name\", {\r\n            value: \"RepeaterOverflowError\",\r\n            enumerable: false,\r\n        });\r\n        if (typeof Object.setPrototypeOf === \"function\") {\r\n            Object.setPrototypeOf(_this, _this.constructor.prototype);\r\n        }\r\n        else {\r\n            _this.__proto__ = _this.constructor.prototype;\r\n        }\r\n        if (typeof Error.captureStackTrace === \"function\") {\r\n            Error.captureStackTrace(_this, _this.constructor);\r\n        }\r\n        return _this;\r\n    }\r\n    return RepeaterOverflowError;\r\n}(Error));\r\n/** A buffer which allows you to push a set amount of values to the repeater without pushes waiting or throwing errors. */\r\nvar FixedBuffer = /** @class */ (function () {\r\n    function FixedBuffer(capacity) {\r\n        if (capacity < 0) {\r\n            throw new RangeError(\"Capacity may not be less than 0\");\r\n        }\r\n        this._c = capacity;\r\n        this._q = [];\r\n    }\r\n    Object.defineProperty(FixedBuffer.prototype, \"empty\", {\r\n        get: function () {\r\n            return this._q.length === 0;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FixedBuffer.prototype, \"full\", {\r\n        get: function () {\r\n            return this._q.length >= this._c;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    FixedBuffer.prototype.add = function (value) {\r\n        if (this.full) {\r\n            throw new Error(\"Buffer full\");\r\n        }\r\n        else {\r\n            this._q.push(value);\r\n        }\r\n    };\r\n    FixedBuffer.prototype.remove = function () {\r\n        if (this.empty) {\r\n            throw new Error(\"Buffer empty\");\r\n        }\r\n        return this._q.shift();\r\n    };\r\n    return FixedBuffer;\r\n}());\r\n// TODO: Use a circular buffer here.\r\n/** Sliding buffers allow you to push a set amount of values to the repeater without pushes waiting or throwing errors. If the number of values exceeds the capacity set in the constructor, the buffer will discard the earliest values added. */\r\nvar SlidingBuffer = /** @class */ (function () {\r\n    function SlidingBuffer(capacity) {\r\n        if (capacity < 1) {\r\n            throw new RangeError(\"Capacity may not be less than 1\");\r\n        }\r\n        this._c = capacity;\r\n        this._q = [];\r\n    }\r\n    Object.defineProperty(SlidingBuffer.prototype, \"empty\", {\r\n        get: function () {\r\n            return this._q.length === 0;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SlidingBuffer.prototype, \"full\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    SlidingBuffer.prototype.add = function (value) {\r\n        while (this._q.length >= this._c) {\r\n            this._q.shift();\r\n        }\r\n        this._q.push(value);\r\n    };\r\n    SlidingBuffer.prototype.remove = function () {\r\n        if (this.empty) {\r\n            throw new Error(\"Buffer empty\");\r\n        }\r\n        return this._q.shift();\r\n    };\r\n    return SlidingBuffer;\r\n}());\r\n/** Dropping buffers allow you to push a set amount of values to the repeater without the push function waiting or throwing errors. If the number of values exceeds the capacity set in the constructor, the buffer will discard the latest values added. */\r\nvar DroppingBuffer = /** @class */ (function () {\r\n    function DroppingBuffer(capacity) {\r\n        if (capacity < 1) {\r\n            throw new RangeError(\"Capacity may not be less than 1\");\r\n        }\r\n        this._c = capacity;\r\n        this._q = [];\r\n    }\r\n    Object.defineProperty(DroppingBuffer.prototype, \"empty\", {\r\n        get: function () {\r\n            return this._q.length === 0;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DroppingBuffer.prototype, \"full\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    DroppingBuffer.prototype.add = function (value) {\r\n        if (this._q.length < this._c) {\r\n            this._q.push(value);\r\n        }\r\n    };\r\n    DroppingBuffer.prototype.remove = function () {\r\n        if (this.empty) {\r\n            throw new Error(\"Buffer empty\");\r\n        }\r\n        return this._q.shift();\r\n    };\r\n    return DroppingBuffer;\r\n}());\r\n/** Makes sure promise-likes dont cause unhandled rejections. */\r\nfunction swallow(value) {\r\n    if (value != null && typeof value.then === \"function\") {\r\n        value.then(NOOP, NOOP);\r\n    }\r\n}\r\n/*** REPEATER STATES ***/\r\n/** The following is an enumeration of all possible repeater states. These states are ordered, and a repeater may only advance to higher states. */\r\n/** The initial state of the repeater. */\r\nvar Initial = 0;\r\n/** Repeaters advance to this state the first time the next method is called on the repeater. */\r\nvar Started = 1;\r\n/** Repeaters advance to this state when the stop function is called. */\r\nvar Stopped = 2;\r\n/** Repeaters advance to this state when there are no values left to be pulled from the repeater. */\r\nvar Done = 3;\r\n/** Repeaters advance to this state if an error is thrown into the repeater. */\r\nvar Rejected = 4;\r\n/** The maximum number of push or next operations which may exist on a single repeater. */\r\nvar MAX_QUEUE_LENGTH = 1024;\r\nvar NOOP = function () { };\r\n/** A helper function used to mimic the behavior of async generators where the final iteration is consumed. */\r\nfunction consumeExecution(r) {\r\n    var err = r.err;\r\n    var execution = Promise.resolve(r.execution).then(function (value) {\r\n        if (err != null) {\r\n            throw err;\r\n        }\r\n        return value;\r\n    });\r\n    r.err = undefined;\r\n    r.execution = execution.then(function () { return undefined; }, function () { return undefined; });\r\n    return r.pending === undefined ? execution : r.pending.then(function () { return execution; });\r\n}\r\n/** A helper function for building iterations from values. Promises are unwrapped, so that iterations never have their value property set to a promise. */\r\nfunction createIteration(r, value) {\r\n    var done = r.state >= Done;\r\n    return Promise.resolve(value).then(function (value) {\r\n        if (!done && r.state >= Rejected) {\r\n            return consumeExecution(r).then(function (value) { return ({\r\n                value: value,\r\n                done: true,\r\n            }); });\r\n        }\r\n        return { value: value, done: done };\r\n    });\r\n}\r\n/**\r\n * This function is bound and passed to the executor as the stop argument.\r\n *\r\n * Advances state to Stopped.\r\n */\r\nfunction stop(r, err) {\r\n    var e_1, _a;\r\n    if (r.state >= Stopped) {\r\n        return;\r\n    }\r\n    r.state = Stopped;\r\n    r.onnext();\r\n    r.onstop();\r\n    if (r.err == null) {\r\n        r.err = err;\r\n    }\r\n    if (r.pushes.length === 0 &&\r\n        (typeof r.buffer === \"undefined\" || r.buffer.empty)) {\r\n        finish(r);\r\n    }\r\n    else {\r\n        try {\r\n            for (var _b = __values(r.pushes), _d = _b.next(); !_d.done; _d = _b.next()) {\r\n                var push_1 = _d.value;\r\n                push_1.resolve();\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_d && !_d.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    }\r\n}\r\n/**\r\n * The difference between stopping a repeater vs finishing a repeater is that stopping a repeater allows next to continue to drain values from the push queue and buffer, while finishing a repeater will clear all pending values and end iteration immediately. Once, a repeater is finished, all iterations will have the done property set to true.\r\n *\r\n * Advances state to Done.\r\n */\r\nfunction finish(r) {\r\n    var e_2, _a;\r\n    if (r.state >= Done) {\r\n        return;\r\n    }\r\n    if (r.state < Stopped) {\r\n        stop(r);\r\n    }\r\n    r.state = Done;\r\n    r.buffer = undefined;\r\n    try {\r\n        for (var _b = __values(r.nexts), _d = _b.next(); !_d.done; _d = _b.next()) {\r\n            var next = _d.value;\r\n            var execution = r.pending === undefined\r\n                ? consumeExecution(r)\r\n                : r.pending.then(function () { return consumeExecution(r); });\r\n            next.resolve(createIteration(r, execution));\r\n        }\r\n    }\r\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n    finally {\r\n        try {\r\n            if (_d && !_d.done && (_a = _b.return)) _a.call(_b);\r\n        }\r\n        finally { if (e_2) throw e_2.error; }\r\n    }\r\n    r.pushes = [];\r\n    r.nexts = [];\r\n}\r\n/**\r\n * Called when a promise passed to push rejects, or when a push call is unhandled.\r\n *\r\n * Advances state to Rejected.\r\n */\r\nfunction reject(r) {\r\n    if (r.state >= Rejected) {\r\n        return;\r\n    }\r\n    if (r.state < Done) {\r\n        finish(r);\r\n    }\r\n    r.state = Rejected;\r\n}\r\n/** This function is bound and passed to the executor as the push argument. */\r\nfunction push(r, value) {\r\n    swallow(value);\r\n    if (r.pushes.length >= MAX_QUEUE_LENGTH) {\r\n        throw new RepeaterOverflowError(\"No more than \" + MAX_QUEUE_LENGTH + \" pending calls to push are allowed on a single repeater.\");\r\n    }\r\n    else if (r.state >= Stopped) {\r\n        return Promise.resolve(undefined);\r\n    }\r\n    var valueP = r.pending === undefined\r\n        ? Promise.resolve(value)\r\n        : r.pending.then(function () { return value; });\r\n    valueP = valueP.catch(function (err) {\r\n        if (r.state < Stopped) {\r\n            r.err = err;\r\n        }\r\n        reject(r);\r\n        return undefined; // void :(\r\n    });\r\n    var nextP;\r\n    if (r.nexts.length) {\r\n        var next_1 = r.nexts.shift();\r\n        next_1.resolve(createIteration(r, valueP));\r\n        if (r.nexts.length) {\r\n            nextP = Promise.resolve(r.nexts[0].value);\r\n        }\r\n        else {\r\n            nextP = new Promise(function (resolve) { return (r.onnext = resolve); });\r\n        }\r\n    }\r\n    else if (typeof r.buffer !== \"undefined\" && !r.buffer.full) {\r\n        r.buffer.add(valueP);\r\n        nextP = Promise.resolve(undefined);\r\n    }\r\n    else {\r\n        nextP = new Promise(function (resolve) { return r.pushes.push({ resolve: resolve, value: valueP }); });\r\n    }\r\n    // If an error is thrown into the repeater via the next or throw methods, we give the repeater a chance to handle this by rejecting the promise returned from push. If the push call is not immediately handled we throw the next iteration of the repeater.\r\n    // To check that the promise returned from push is floating, we modify the then and catch methods of the returned promise so that they flip the floating flag. The push function actually does not return a promise, because modern engines do not call the then and catch methods on native promises. By making next a plain old javascript object, we ensure that the then and catch methods will be called.\r\n    var floating = true;\r\n    var next = {};\r\n    var unhandled = nextP.catch(function (err) {\r\n        if (floating) {\r\n            throw err;\r\n        }\r\n        return undefined; // void :(\r\n    });\r\n    next.then = function (onfulfilled, onrejected) {\r\n        floating = false;\r\n        return Promise.prototype.then.call(nextP, onfulfilled, onrejected);\r\n    };\r\n    next.catch = function (onrejected) {\r\n        floating = false;\r\n        return Promise.prototype.catch.call(nextP, onrejected);\r\n    };\r\n    next.finally = nextP.finally.bind(nextP);\r\n    r.pending = valueP\r\n        .then(function () { return unhandled; })\r\n        .catch(function (err) {\r\n        r.err = err;\r\n        reject(r);\r\n    });\r\n    return next;\r\n}\r\n/**\r\n * Creates the stop callable promise which is passed to the executor\r\n */\r\nfunction createStop(r) {\r\n    var stop1 = stop.bind(null, r);\r\n    var stopP = new Promise(function (resolve) { return (r.onstop = resolve); });\r\n    stop1.then = stopP.then.bind(stopP);\r\n    stop1.catch = stopP.catch.bind(stopP);\r\n    stop1.finally = stopP.finally.bind(stopP);\r\n    return stop1;\r\n}\r\n/**\r\n * Calls the executor passed into the constructor. This function is called the first time the next method is called on the repeater.\r\n *\r\n * Advances state to Started.\r\n */\r\nfunction execute(r) {\r\n    if (r.state >= Started) {\r\n        return;\r\n    }\r\n    r.state = Started;\r\n    var push1 = push.bind(null, r);\r\n    var stop1 = createStop(r);\r\n    r.execution = new Promise(function (resolve) { return resolve(r.executor(push1, stop1)); });\r\n    // TODO: We should consider stopping all repeaters when the executor settles.\r\n    r.execution.catch(function () { return stop(r); });\r\n}\r\nvar records = new WeakMap();\r\n// NOTE: While repeaters implement and are assignable to the AsyncGenerator interface, and you can use the types interchangeably, we dont use typescripts implements syntax here because this would make supporting earlier versions of typescript trickier. This is because TypeScript version 3.6 changed the iterator types by adding the TReturn and TNext type parameters.\r\nvar Repeater = /** @class */ (function () {\r\n    function Repeater(executor, buffer) {\r\n        records.set(this, {\r\n            executor: executor,\r\n            buffer: buffer,\r\n            err: undefined,\r\n            state: Initial,\r\n            pushes: [],\r\n            nexts: [],\r\n            pending: undefined,\r\n            execution: undefined,\r\n            onnext: NOOP,\r\n            onstop: NOOP,\r\n        });\r\n    }\r\n    Repeater.prototype.next = function (value) {\r\n        swallow(value);\r\n        var r = records.get(this);\r\n        if (r === undefined) {\r\n            throw new Error(\"WeakMap error\");\r\n        }\r\n        if (r.nexts.length >= MAX_QUEUE_LENGTH) {\r\n            throw new RepeaterOverflowError(\"No more than \" + MAX_QUEUE_LENGTH + \" pending calls to next are allowed on a single repeater.\");\r\n        }\r\n        if (r.state <= Initial) {\r\n            execute(r);\r\n        }\r\n        r.onnext(value);\r\n        if (typeof r.buffer !== \"undefined\" && !r.buffer.empty) {\r\n            var result = createIteration(r, r.buffer.remove());\r\n            if (r.pushes.length) {\r\n                var push_2 = r.pushes.shift();\r\n                r.buffer.add(push_2.value);\r\n                r.onnext = push_2.resolve;\r\n            }\r\n            return result;\r\n        }\r\n        else if (r.pushes.length) {\r\n            var push_3 = r.pushes.shift();\r\n            r.onnext = push_3.resolve;\r\n            return createIteration(r, push_3.value);\r\n        }\r\n        else if (r.state >= Stopped) {\r\n            finish(r);\r\n            return createIteration(r, consumeExecution(r));\r\n        }\r\n        return new Promise(function (resolve) { return r.nexts.push({ resolve: resolve, value: value }); });\r\n    };\r\n    Repeater.prototype.return = function (value) {\r\n        swallow(value);\r\n        var r = records.get(this);\r\n        if (r === undefined) {\r\n            throw new Error(\"WeakMap error\");\r\n        }\r\n        finish(r);\r\n        // We override the execution because return should always return the value passed in.\r\n        r.execution = Promise.resolve(r.execution).then(function () { return value; });\r\n        return createIteration(r, consumeExecution(r));\r\n    };\r\n    Repeater.prototype.throw = function (err) {\r\n        var r = records.get(this);\r\n        if (r === undefined) {\r\n            throw new Error(\"WeakMap error\");\r\n        }\r\n        if (r.state <= Initial ||\r\n            r.state >= Stopped ||\r\n            (typeof r.buffer !== \"undefined\" && !r.buffer.empty)) {\r\n            finish(r);\r\n            // If r.err is already set, that mean the repeater has already produced an error, so we throw that error rather than the error passed in, because doing so might be more informative for the caller.\r\n            if (r.err == null) {\r\n                r.err = err;\r\n            }\r\n            return createIteration(r, consumeExecution(r));\r\n        }\r\n        return this.next(Promise.reject(err));\r\n    };\r\n    Repeater.prototype[Symbol.asyncIterator] = function () {\r\n        return this;\r\n    };\r\n    // TODO: Remove these static methods from the class.\r\n    Repeater.race = race;\r\n    Repeater.merge = merge;\r\n    Repeater.zip = zip;\r\n    Repeater.latest = latest;\r\n    return Repeater;\r\n}());\r\n/*** COMBINATOR FUNCTIONS ***/\r\n// TODO: move these combinators to their own file.\r\nfunction getIterators(values, options) {\r\n    var e_3, _a;\r\n    var iters = [];\r\n    var _loop_1 = function (value) {\r\n        if (value != null && typeof value[Symbol.asyncIterator] === \"function\") {\r\n            iters.push(value[Symbol.asyncIterator]());\r\n        }\r\n        else if (value != null && typeof value[Symbol.iterator] === \"function\") {\r\n            iters.push(value[Symbol.iterator]());\r\n        }\r\n        else {\r\n            iters.push((function valueToAsyncIterator() {\r\n                return __asyncGenerator(this, arguments, function valueToAsyncIterator_1() {\r\n                    return __generator(this, function (_a) {\r\n                        switch (_a.label) {\r\n                            case 0:\r\n                                if (!options.yieldValues) return [3 /*break*/, 3];\r\n                                return [4 /*yield*/, __await(value)];\r\n                            case 1: return [4 /*yield*/, _a.sent()];\r\n                            case 2:\r\n                                _a.sent();\r\n                                _a.label = 3;\r\n                            case 3:\r\n                                if (!options.returnValues) return [3 /*break*/, 5];\r\n                                return [4 /*yield*/, __await(value)];\r\n                            case 4: return [2 /*return*/, _a.sent()];\r\n                            case 5: return [2 /*return*/];\r\n                        }\r\n                    });\r\n                });\r\n            })());\r\n        }\r\n    };\r\n    try {\r\n        for (var values_1 = __values(values), values_1_1 = values_1.next(); !values_1_1.done; values_1_1 = values_1.next()) {\r\n            var value = values_1_1.value;\r\n            _loop_1(value);\r\n        }\r\n    }\r\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\r\n    finally {\r\n        try {\r\n            if (values_1_1 && !values_1_1.done && (_a = values_1.return)) _a.call(values_1);\r\n        }\r\n        finally { if (e_3) throw e_3.error; }\r\n    }\r\n    return iters;\r\n}\r\n// NOTE: whenever you see any variables called `advance` or `advances`, know that it is a hack to get around the fact that `Promise.race` leaks memory. These variables are intended to be set to the resolve function of a promise which is constructed and awaited as an alternative to Promise.race. For more information, see this comment in the Node.js issue tracker: https://github.com/nodejs/node/issues/17469#issuecomment-685216777.\r\nfunction race(contenders) {\r\n    var _this = this;\r\n    var iters = getIterators(contenders, { returnValues: true });\r\n    return new Repeater(function (push, stop) { return __awaiter(_this, void 0, void 0, function () {\r\n        var advance, stopped, finalIteration, iteration, i_1, _loop_2;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!iters.length) {\r\n                        stop();\r\n                        return [2 /*return*/];\r\n                    }\r\n                    stopped = false;\r\n                    stop.then(function () {\r\n                        advance();\r\n                        stopped = true;\r\n                    });\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, , 5, 7]);\r\n                    iteration = void 0;\r\n                    i_1 = 0;\r\n                    _loop_2 = function () {\r\n                        var j, iters_1, iters_1_1, iter;\r\n                        var e_4, _a;\r\n                        return __generator(this, function (_b) {\r\n                            switch (_b.label) {\r\n                                case 0:\r\n                                    j = i_1;\r\n                                    try {\r\n                                        for (iters_1 = (e_4 = void 0, __values(iters)), iters_1_1 = iters_1.next(); !iters_1_1.done; iters_1_1 = iters_1.next()) {\r\n                                            iter = iters_1_1.value;\r\n                                            Promise.resolve(iter.next()).then(function (iteration) {\r\n                                                if (iteration.done) {\r\n                                                    stop();\r\n                                                    if (finalIteration === undefined) {\r\n                                                        finalIteration = iteration;\r\n                                                    }\r\n                                                }\r\n                                                else if (i_1 === j) {\r\n                                                    // This iterator has won, advance i and resolve the promise.\r\n                                                    i_1++;\r\n                                                    advance(iteration);\r\n                                                }\r\n                                            }, function (err) { return stop(err); });\r\n                                        }\r\n                                    }\r\n                                    catch (e_4_1) { e_4 = { error: e_4_1 }; }\r\n                                    finally {\r\n                                        try {\r\n                                            if (iters_1_1 && !iters_1_1.done && (_a = iters_1.return)) _a.call(iters_1);\r\n                                        }\r\n                                        finally { if (e_4) throw e_4.error; }\r\n                                    }\r\n                                    return [4 /*yield*/, new Promise(function (resolve) { return (advance = resolve); })];\r\n                                case 1:\r\n                                    iteration = _b.sent();\r\n                                    if (!(iteration !== undefined)) return [3 /*break*/, 3];\r\n                                    return [4 /*yield*/, push(iteration.value)];\r\n                                case 2:\r\n                                    _b.sent();\r\n                                    _b.label = 3;\r\n                                case 3: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    };\r\n                    _a.label = 2;\r\n                case 2:\r\n                    if (!!stopped) return [3 /*break*/, 4];\r\n                    return [5 /*yield**/, _loop_2()];\r\n                case 3:\r\n                    _a.sent();\r\n                    return [3 /*break*/, 2];\r\n                case 4: return [2 /*return*/, finalIteration && finalIteration.value];\r\n                case 5:\r\n                    stop();\r\n                    return [4 /*yield*/, Promise.race(iters.map(function (iter) { return iter.return && iter.return(); }))];\r\n                case 6:\r\n                    _a.sent();\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); });\r\n}\r\nfunction merge(contenders) {\r\n    var _this = this;\r\n    var iters = getIterators(contenders, { yieldValues: true });\r\n    return new Repeater(function (push, stop) { return __awaiter(_this, void 0, void 0, function () {\r\n        var advances, stopped, finalIteration;\r\n        var _this = this;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!iters.length) {\r\n                        stop();\r\n                        return [2 /*return*/];\r\n                    }\r\n                    advances = [];\r\n                    stopped = false;\r\n                    stop.then(function () {\r\n                        var e_5, _a;\r\n                        stopped = true;\r\n                        try {\r\n                            for (var advances_1 = __values(advances), advances_1_1 = advances_1.next(); !advances_1_1.done; advances_1_1 = advances_1.next()) {\r\n                                var advance = advances_1_1.value;\r\n                                advance();\r\n                            }\r\n                        }\r\n                        catch (e_5_1) { e_5 = { error: e_5_1 }; }\r\n                        finally {\r\n                            try {\r\n                                if (advances_1_1 && !advances_1_1.done && (_a = advances_1.return)) _a.call(advances_1);\r\n                            }\r\n                            finally { if (e_5) throw e_5.error; }\r\n                        }\r\n                    });\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, , 3, 4]);\r\n                    return [4 /*yield*/, Promise.all(iters.map(function (iter, i) { return __awaiter(_this, void 0, void 0, function () {\r\n                            var iteration, _a;\r\n                            return __generator(this, function (_b) {\r\n                                switch (_b.label) {\r\n                                    case 0:\r\n                                        _b.trys.push([0, , 6, 9]);\r\n                                        _b.label = 1;\r\n                                    case 1:\r\n                                        if (!!stopped) return [3 /*break*/, 5];\r\n                                        Promise.resolve(iter.next()).then(function (iteration) { return advances[i](iteration); }, function (err) { return stop(err); });\r\n                                        return [4 /*yield*/, new Promise(function (resolve) {\r\n                                                advances[i] = resolve;\r\n                                            })];\r\n                                    case 2:\r\n                                        iteration = _b.sent();\r\n                                        if (!(iteration !== undefined)) return [3 /*break*/, 4];\r\n                                        if (iteration.done) {\r\n                                            finalIteration = iteration;\r\n                                            return [2 /*return*/];\r\n                                        }\r\n                                        return [4 /*yield*/, push(iteration.value)];\r\n                                    case 3:\r\n                                        _b.sent();\r\n                                        _b.label = 4;\r\n                                    case 4: return [3 /*break*/, 1];\r\n                                    case 5: return [3 /*break*/, 9];\r\n                                    case 6:\r\n                                        _a = iter.return;\r\n                                        if (!_a) return [3 /*break*/, 8];\r\n                                        return [4 /*yield*/, iter.return()];\r\n                                    case 7:\r\n                                        _a = (_b.sent());\r\n                                        _b.label = 8;\r\n                                    case 8:\r\n                                        return [7 /*endfinally*/];\r\n                                    case 9: return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        }); }))];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, finalIteration && finalIteration.value];\r\n                case 3:\r\n                    stop();\r\n                    return [7 /*endfinally*/];\r\n                case 4: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); });\r\n}\r\nfunction zip(contenders) {\r\n    var _this = this;\r\n    var iters = getIterators(contenders, { returnValues: true });\r\n    return new Repeater(function (push, stop) { return __awaiter(_this, void 0, void 0, function () {\r\n        var advance, stopped, iterations, values;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!iters.length) {\r\n                        stop();\r\n                        return [2 /*return*/, []];\r\n                    }\r\n                    stopped = false;\r\n                    stop.then(function () {\r\n                        advance();\r\n                        stopped = true;\r\n                    });\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, , 6, 8]);\r\n                    _a.label = 2;\r\n                case 2:\r\n                    if (!!stopped) return [3 /*break*/, 5];\r\n                    Promise.all(iters.map(function (iter) { return iter.next(); })).then(function (iterations) { return advance(iterations); }, function (err) { return stop(err); });\r\n                    return [4 /*yield*/, new Promise(function (resolve) { return (advance = resolve); })];\r\n                case 3:\r\n                    iterations = _a.sent();\r\n                    if (iterations === undefined) {\r\n                        return [2 /*return*/];\r\n                    }\r\n                    values = iterations.map(function (iteration) { return iteration.value; });\r\n                    if (iterations.some(function (iteration) { return iteration.done; })) {\r\n                        return [2 /*return*/, values];\r\n                    }\r\n                    return [4 /*yield*/, push(values)];\r\n                case 4:\r\n                    _a.sent();\r\n                    return [3 /*break*/, 2];\r\n                case 5: return [3 /*break*/, 8];\r\n                case 6:\r\n                    stop();\r\n                    return [4 /*yield*/, Promise.all(iters.map(function (iter) { return iter.return && iter.return(); }))];\r\n                case 7:\r\n                    _a.sent();\r\n                    return [7 /*endfinally*/];\r\n                case 8: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); });\r\n}\r\nfunction latest(contenders) {\r\n    var _this = this;\r\n    var iters = getIterators(contenders, {\r\n        yieldValues: true,\r\n        returnValues: true,\r\n    });\r\n    return new Repeater(function (push, stop) { return __awaiter(_this, void 0, void 0, function () {\r\n        var advance, advances, stopped, iterations_1, values_2;\r\n        var _this = this;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!iters.length) {\r\n                        stop();\r\n                        return [2 /*return*/, []];\r\n                    }\r\n                    advances = [];\r\n                    stopped = false;\r\n                    stop.then(function () {\r\n                        var e_6, _a;\r\n                        advance();\r\n                        try {\r\n                            for (var advances_2 = __values(advances), advances_2_1 = advances_2.next(); !advances_2_1.done; advances_2_1 = advances_2.next()) {\r\n                                var advance1 = advances_2_1.value;\r\n                                advance1();\r\n                            }\r\n                        }\r\n                        catch (e_6_1) { e_6 = { error: e_6_1 }; }\r\n                        finally {\r\n                            try {\r\n                                if (advances_2_1 && !advances_2_1.done && (_a = advances_2.return)) _a.call(advances_2);\r\n                            }\r\n                            finally { if (e_6) throw e_6.error; }\r\n                        }\r\n                        stopped = true;\r\n                    });\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, , 5, 7]);\r\n                    Promise.all(iters.map(function (iter) { return iter.next(); })).then(function (iterations) { return advance(iterations); }, function (err) { return stop(err); });\r\n                    return [4 /*yield*/, new Promise(function (resolve) { return (advance = resolve); })];\r\n                case 2:\r\n                    iterations_1 = _a.sent();\r\n                    if (iterations_1 === undefined) {\r\n                        return [2 /*return*/];\r\n                    }\r\n                    values_2 = iterations_1.map(function (iteration) { return iteration.value; });\r\n                    if (iterations_1.every(function (iteration) { return iteration.done; })) {\r\n                        return [2 /*return*/, values_2];\r\n                    }\r\n                    // We continuously yield and mutate the same values array so we shallow copy it each time it is pushed.\r\n                    return [4 /*yield*/, push(values_2.slice())];\r\n                case 3:\r\n                    // We continuously yield and mutate the same values array so we shallow copy it each time it is pushed.\r\n                    _a.sent();\r\n                    return [4 /*yield*/, Promise.all(iters.map(function (iter, i) { return __awaiter(_this, void 0, void 0, function () {\r\n                            var iteration;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0:\r\n                                        if (iterations_1[i].done) {\r\n                                            return [2 /*return*/, iterations_1[i].value];\r\n                                        }\r\n                                        _a.label = 1;\r\n                                    case 1:\r\n                                        if (!!stopped) return [3 /*break*/, 4];\r\n                                        Promise.resolve(iter.next()).then(function (iteration) { return advances[i](iteration); }, function (err) { return stop(err); });\r\n                                        return [4 /*yield*/, new Promise(function (resolve) { return (advances[i] = resolve); })];\r\n                                    case 2:\r\n                                        iteration = _a.sent();\r\n                                        if (iteration === undefined) {\r\n                                            return [2 /*return*/, iterations_1[i].value];\r\n                                        }\r\n                                        else if (iteration.done) {\r\n                                            return [2 /*return*/, iteration.value];\r\n                                        }\r\n                                        values_2[i] = iteration.value;\r\n                                        return [4 /*yield*/, push(values_2.slice())];\r\n                                    case 3:\r\n                                        _a.sent();\r\n                                        return [3 /*break*/, 1];\r\n                                    case 4: return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        }); }))];\r\n                case 4: return [2 /*return*/, _a.sent()];\r\n                case 5:\r\n                    stop();\r\n                    return [4 /*yield*/, Promise.all(iters.map(function (iter) { return iter.return && iter.return(); }))];\r\n                case 6:\r\n                    _a.sent();\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); });\r\n}\n\nexport { DroppingBuffer, FixedBuffer, MAX_QUEUE_LENGTH, Repeater, RepeaterOverflowError, SlidingBuffer };\n//# sourceMappingURL=repeater.js.map\n","export var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\n    LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\n    LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n})(LogLevel || (LogLevel = {}));\nexport default class Logger {\n    static debug(...args) {\n        this.log(LogLevel.Debug, ...args);\n    }\n    static info(...args) {\n        this.log(LogLevel.Info, ...args);\n    }\n    static warn(...args) {\n        this.log(LogLevel.Warn, ...args);\n    }\n    static error(...args) {\n        this.log(LogLevel.Error, ...args);\n    }\n    static log(level, ...args) {\n        if (this.logLevel > level) {\n            return;\n        }\n        switch (level) {\n            case LogLevel.Debug: {\n                console.debug(...args);\n                break;\n            }\n            case LogLevel.Info: {\n                console.info(...args);\n                break;\n            }\n            case LogLevel.Warn: {\n                console.warn(...args);\n                break;\n            }\n            case LogLevel.Error: {\n                console.error(...args);\n                break;\n            }\n        }\n    }\n}\nLogger.logLevel = LogLevel.Info;\n//# sourceMappingURL=Logger.js.map","export default class Config {\n    constructor() {\n        this._extraRequestThreshold = 256 * 1024;\n    }\n    extraRequestThreshold() {\n        return this._extraRequestThreshold;\n    }\n    setExtraRequestThreshold(bytes) {\n        if (bytes < 0) {\n            throw new Error('extraRequestThreshold cannot be negative');\n        }\n        this._extraRequestThreshold = bytes;\n    }\n}\nConfig.global = new Config();\n//# sourceMappingURL=Config.js.map","import Config from './Config';\nimport Logger from './Logger';\nexport const NODE_ITEM_LEN = 8 * 4 + 8;\nexport const DEFAULT_NODE_SIZE = 16;\nexport function calcTreeSize(numItems, nodeSize) {\n    nodeSize = Math.min(Math.max(+nodeSize, 2), 65535);\n    let n = numItems;\n    let numNodes = n;\n    do {\n        n = Math.ceil(n / nodeSize);\n        numNodes += n;\n    } while (n !== 1);\n    return numNodes * NODE_ITEM_LEN;\n}\nfunction generateLevelBounds(numItems, nodeSize) {\n    if (nodeSize < 2)\n        throw new Error('Node size must be at least 2');\n    if (numItems === 0)\n        throw new Error('Number of items must be greater than 0');\n    let n = numItems;\n    let numNodes = n;\n    const levelNumNodes = [n];\n    do {\n        n = Math.ceil(n / nodeSize);\n        numNodes += n;\n        levelNumNodes.push(n);\n    } while (n !== 1);\n    const levelOffsets = [];\n    n = numNodes;\n    for (const size of levelNumNodes) {\n        levelOffsets.push(n - size);\n        n -= size;\n    }\n    levelOffsets.reverse();\n    levelNumNodes.reverse();\n    const levelBounds = [];\n    for (let i = 0; i < levelNumNodes.length; i++)\n        levelBounds.push([levelOffsets[i], levelOffsets[i] + levelNumNodes[i]]);\n    levelBounds.reverse();\n    return levelBounds;\n}\nexport async function* streamSearch(numItems, nodeSize, rect, readNode) {\n    class NodeRange {\n        constructor(nodes, level) {\n            this._level = level;\n            this.nodes = nodes;\n        }\n        level() {\n            return this._level;\n        }\n        startNode() {\n            return this.nodes[0];\n        }\n        endNode() {\n            return this.nodes[1];\n        }\n        extendEndNodeToNewOffset(newOffset) {\n            console.assert(newOffset > this.nodes[1]);\n            this.nodes[1] = newOffset;\n        }\n        toString() {\n            return `[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`;\n        }\n    }\n    const { minX, minY, maxX, maxY } = rect;\n    Logger.info(`tree items: ${numItems}, nodeSize: ${nodeSize}`);\n    const levelBounds = generateLevelBounds(numItems, nodeSize);\n    const leafNodesOffset = levelBounds[0][0];\n    const rootNodeRange = (() => {\n        const range = [0, 1];\n        const level = levelBounds.length - 1;\n        return new NodeRange(range, level);\n    })();\n    const queue = [rootNodeRange];\n    Logger.debug(`starting stream search with queue: ${queue}, numItems: ${numItems}, nodeSize: ${nodeSize}, levelBounds: ${levelBounds}`);\n    while (queue.length != 0) {\n        const nodeRange = queue.shift();\n        Logger.debug(`popped node: ${nodeRange}, queueLength: ${queue.length}`);\n        const nodeIndex = nodeRange.startNode();\n        const isLeafNode = nodeIndex >= leafNodesOffset;\n        const [, levelBound] = levelBounds[nodeRange.level()];\n        const end = Math.min(nodeRange.endNode() + nodeSize, levelBound);\n        const length = end - nodeIndex;\n        const buffer = await readNode(nodeIndex * NODE_ITEM_LEN, length * NODE_ITEM_LEN);\n        const float64Array = new Float64Array(buffer);\n        const uint32Array = new Uint32Array(buffer);\n        for (let pos = nodeIndex; pos < end; pos++) {\n            const nodePos = (pos - nodeIndex) * 5;\n            if (maxX < float64Array[nodePos + 0])\n                continue;\n            if (maxY < float64Array[nodePos + 1])\n                continue;\n            if (minX > float64Array[nodePos + 2])\n                continue;\n            if (minY > float64Array[nodePos + 3])\n                continue;\n            const low32Offset = uint32Array[(nodePos << 1) + 8];\n            const high32Offset = uint32Array[(nodePos << 1) + 9];\n            const offset = readUint52(high32Offset, low32Offset);\n            if (isLeafNode) {\n                const featureLength = (() => {\n                    if (pos < numItems - 1) {\n                        const nextPos = (pos - nodeIndex + 1) * 5;\n                        const low32Offset = uint32Array[(nextPos << 1) + 8];\n                        const high32Offset = uint32Array[(nextPos << 1) + 9];\n                        const nextOffset = readUint52(high32Offset, low32Offset);\n                        return nextOffset - offset;\n                    }\n                    else {\n                        return null;\n                    }\n                })();\n                yield [offset, pos - leafNodesOffset, featureLength];\n                continue;\n            }\n            const extraRequestThresholdNodes = Config.global.extraRequestThreshold() / NODE_ITEM_LEN;\n            const nearestNodeRange = queue[queue.length - 1];\n            if (nearestNodeRange !== undefined &&\n                nearestNodeRange.level() == nodeRange.level() - 1 &&\n                offset < nearestNodeRange.endNode() + extraRequestThresholdNodes) {\n                Logger.debug(`Merging \"nodeRange\" request into existing range: ${nearestNodeRange}, newOffset: ${nearestNodeRange.endNode()} -> ${offset}`);\n                nearestNodeRange.extendEndNodeToNewOffset(offset);\n                continue;\n            }\n            const newNodeRange = (() => {\n                const level = nodeRange.level() - 1;\n                const range = [offset, offset + 1];\n                return new NodeRange(range, level);\n            })();\n            if (nearestNodeRange !== undefined &&\n                nearestNodeRange.level() == newNodeRange.level()) {\n                Logger.info(`Same level, but too far away. Pushing new request at offset: ${offset} rather than merging with distant ${nearestNodeRange}`);\n            }\n            else {\n                Logger.info(`Pushing new level for ${newNodeRange} onto queue with nearestNodeRange: ${nearestNodeRange} since there's not already a range for this level.`);\n            }\n            queue.push(newNodeRange);\n        }\n    }\n}\nfunction readUint52(high32Bits, low32Bits) {\n    if ((high32Bits & 0xfff00000) != 0) {\n        throw Error('integer is too large to be safely represented');\n    }\n    const result = low32Bits + high32Bits * 2 ** 32;\n    return result;\n}\n//# sourceMappingURL=packedrtree.js.map","export const magicbytes = new Uint8Array([\n    0x66, 0x67, 0x62, 0x03, 0x66, 0x67, 0x62, 0x00,\n]);\nexport const SIZE_PREFIX_LEN = 4;\n//# sourceMappingURL=constants.js.map","import * as flatbuffers from 'flatbuffers';\nimport { Repeater } from '@repeaterjs/repeater';\nimport { calcTreeSize, DEFAULT_NODE_SIZE, NODE_ITEM_LEN, streamSearch, } from './packedrtree';\nimport { magicbytes, SIZE_PREFIX_LEN } from './constants';\nimport Config from './Config';\nimport Logger from './Logger';\nimport HeaderMeta from './HeaderMeta';\nimport { Feature } from './flat-geobuf/feature';\nexport class HttpReader {\n    constructor(headerClient, header, headerLength, indexLength) {\n        this.headerClient = headerClient;\n        this.header = header;\n        this.headerLength = headerLength;\n        this.indexLength = indexLength;\n    }\n    static async open(url) {\n        const assumedHeaderLength = 2024;\n        const headerClient = new BufferedHttpRangeClient(url);\n        const assumedIndexLength = (() => {\n            const assumedBranchingFactor = DEFAULT_NODE_SIZE;\n            const prefetchedLayers = 3;\n            let result = 0;\n            let i;\n            for (i = 0; i < prefetchedLayers; i++) {\n                const layer_width = assumedBranchingFactor ** i * NODE_ITEM_LEN;\n                result += layer_width;\n            }\n            return result;\n        })();\n        const minReqLength = assumedHeaderLength + assumedIndexLength;\n        Logger.debug(`fetching header. minReqLength: ${minReqLength} (assumedHeaderLength: ${assumedHeaderLength}, assumedIndexLength: ${assumedIndexLength})`);\n        {\n            const bytes = new Uint8Array(await headerClient.getRange(0, 8, minReqLength, 'header'));\n            if (!bytes.every((v, i) => magicbytes[i] === v)) {\n                Logger.error(`bytes: ${bytes} != ${magicbytes}`);\n                throw new Error('Not a FlatGeobuf file');\n            }\n            Logger.debug('magic bytes look good');\n        }\n        let headerLength;\n        {\n            const bytes = await headerClient.getRange(8, 4, minReqLength, 'header');\n            headerLength = new DataView(bytes).getUint32(0, true);\n            const HEADER_MAX_BUFFER_SIZE = 1048576 * 10;\n            if (headerLength > HEADER_MAX_BUFFER_SIZE || headerLength < 8) {\n                throw new Error('Invalid header size');\n            }\n            Logger.debug(`headerLength: ${headerLength}`);\n        }\n        const bytes = await headerClient.getRange(12, headerLength, minReqLength, 'header');\n        const bb = new flatbuffers.ByteBuffer(new Uint8Array(bytes));\n        const header = HeaderMeta.fromByteBuffer(bb);\n        const indexLength = calcTreeSize(header.featuresCount, header.indexNodeSize);\n        Logger.debug('completed: opening http reader');\n        return new HttpReader(headerClient, header, headerLength, indexLength);\n    }\n    async *selectBbox(rect) {\n        const lengthBeforeTree = this.lengthBeforeTree();\n        const bufferedClient = this.headerClient;\n        const readNode = async function (offsetIntoTree, size) {\n            const minReqLength = 0;\n            return bufferedClient.getRange(lengthBeforeTree + offsetIntoTree, size, minReqLength, 'index');\n        };\n        const batches = [];\n        let currentBatch = [];\n        for await (const searchResult of streamSearch(this.header.featuresCount, this.header.indexNodeSize, rect, readNode)) {\n            const [featureOffset, ,] = searchResult;\n            let [, , featureLength] = searchResult;\n            if (!featureLength) {\n                Logger.info('final feature');\n                const guessLength = Config.global.extraRequestThreshold();\n                featureLength = guessLength;\n            }\n            if (currentBatch.length == 0) {\n                currentBatch.push([featureOffset, featureLength]);\n                continue;\n            }\n            const prevFeature = currentBatch[currentBatch.length - 1];\n            const gap = featureOffset - (prevFeature[0] + prevFeature[1]);\n            if (gap > Config.global.extraRequestThreshold()) {\n                Logger.info(`Pushing new feature batch, since gap ${gap} was too large`);\n                batches.push(currentBatch);\n                currentBatch = [];\n            }\n            currentBatch.push([featureOffset, featureLength]);\n        }\n        this.headerClient.logUsage(\"header+index\");\n        if (currentBatch.length > 0) {\n            batches.push(currentBatch);\n        }\n        const promises = batches.flatMap((batch) => this.readFeatureBatch(batch));\n        yield* Repeater.merge(promises);\n    }\n    lengthBeforeTree() {\n        return magicbytes.length + SIZE_PREFIX_LEN + this.headerLength;\n    }\n    lengthBeforeFeatures() {\n        return this.lengthBeforeTree() + this.indexLength;\n    }\n    buildFeatureClient() {\n        return new BufferedHttpRangeClient(this.headerClient.httpClient);\n    }\n    async *readFeatureBatch(batch) {\n        const [firstFeatureOffset] = batch[0];\n        const [lastFeatureOffset, lastFeatureLength] = batch[batch.length - 1];\n        const batchStart = firstFeatureOffset;\n        const batchEnd = lastFeatureOffset + lastFeatureLength;\n        const batchSize = batchEnd - batchStart;\n        const featureClient = this.buildFeatureClient();\n        for (const [featureOffset] of batch) {\n            yield await this.readFeature(featureClient, featureOffset, batchSize);\n        }\n        featureClient.logUsage(\"feature\");\n    }\n    async readFeature(featureClient, featureOffset, minFeatureReqLength) {\n        const offset = featureOffset + this.lengthBeforeFeatures();\n        let featureLength;\n        {\n            const bytes = await featureClient.getRange(offset, 4, minFeatureReqLength, 'feature length');\n            featureLength = new DataView(bytes).getUint32(0, true);\n        }\n        const byteBuffer = await featureClient.getRange(offset + 4, featureLength, minFeatureReqLength, 'feature data');\n        const bytes = new Uint8Array(byteBuffer);\n        const bytesAligned = new Uint8Array(featureLength + SIZE_PREFIX_LEN);\n        bytesAligned.set(bytes, SIZE_PREFIX_LEN);\n        const bb = new flatbuffers.ByteBuffer(bytesAligned);\n        bb.setPosition(SIZE_PREFIX_LEN);\n        return Feature.getRootAsFeature(bb);\n    }\n}\nclass BufferedHttpRangeClient {\n    constructor(source) {\n        this.bytesEverUsed = 0;\n        this.bytesEverFetched = 0;\n        this.buffer = new ArrayBuffer(0);\n        this.head = 0;\n        if (typeof source === 'string') {\n            this.httpClient = new HttpRangeClient(source);\n        }\n        else {\n            this.httpClient = source;\n        }\n    }\n    async getRange(start, length, minReqLength, purpose) {\n        this.bytesEverUsed += length;\n        const start_i = start - this.head;\n        const end_i = start_i + length;\n        if (start_i >= 0 && end_i <= this.buffer.byteLength) {\n            return this.buffer.slice(start_i, end_i);\n        }\n        const lengthToFetch = Math.max(length, minReqLength);\n        this.bytesEverFetched += lengthToFetch;\n        Logger.debug(`requesting for new Range: ${start}-${start + length - 1}`);\n        this.buffer = await this.httpClient.getRange(start, lengthToFetch, purpose);\n        this.head = start;\n        return this.buffer.slice(0, length);\n    }\n    logUsage(purpose) {\n        const category = purpose.split(' ')[0];\n        const used = this.bytesEverUsed;\n        const requested = this.bytesEverFetched;\n        const efficiency = ((100.0 * used) / requested).toFixed(2);\n        Logger.info(`${category} bytes used/requested: ${used} / ${requested} = ${efficiency}%`);\n    }\n}\nclass HttpRangeClient {\n    constructor(url) {\n        this.requestsEverMade = 0;\n        this.bytesEverRequested = 0;\n        this.url = url;\n    }\n    async getRange(begin, length, purpose) {\n        this.requestsEverMade += 1;\n        this.bytesEverRequested += length;\n        const range = `bytes=${begin}-${begin + length - 1}`;\n        Logger.info(`request: #${this.requestsEverMade}, purpose: ${purpose}), bytes: (this_request: ${length}, ever: ${this.bytesEverRequested}), Range: ${range}`);\n        const response = await fetch(this.url, {\n            headers: {\n                Range: range,\n            },\n        });\n        return response.arrayBuffer();\n    }\n}\n//# sourceMappingURL=HttpReader.js.map","import * as flatbuffers from 'flatbuffers';\nimport slice from 'slice-source';\nimport ColumnMeta from '../ColumnMeta';\nimport { Header } from '../flat-geobuf/header';\nimport { Column } from '../flat-geobuf/column';\nimport { ColumnType } from '../flat-geobuf/column-type';\nimport { Feature } from '../flat-geobuf/feature';\nimport HeaderMeta from '../HeaderMeta';\nimport { buildFeature } from './feature';\nimport { toGeometryType } from './geometry';\nimport { HttpReader } from '../HttpReader';\nimport Logger from '../Logger';\nimport { calcTreeSize } from '../packedrtree';\nimport { parseGeometry } from './geometry';\nimport { magicbytes, SIZE_PREFIX_LEN } from '../constants';\nexport function serialize(features) {\n    const headerMeta = introspectHeaderMeta(features);\n    const header = buildHeader(headerMeta);\n    const featureBuffers = features.map((f) => {\n        if (!f.getGeometry)\n            throw new Error('Missing getGeometry implementation');\n        if (!f.getProperties)\n            throw new Error('Missing getProperties implementation');\n        return buildFeature(parseGeometry(f.getGeometry(), headerMeta.geometryType), f.getProperties(), headerMeta);\n    });\n    const featuresLength = featureBuffers\n        .map((f) => f.length)\n        .reduce((a, b) => a + b);\n    const uint8 = new Uint8Array(magicbytes.length + header.length + featuresLength);\n    uint8.set(header, magicbytes.length);\n    let offset = magicbytes.length + header.length;\n    for (const feature of featureBuffers) {\n        uint8.set(feature, offset);\n        offset += feature.length;\n    }\n    uint8.set(magicbytes);\n    return uint8;\n}\nexport function deserialize(bytes, fromFeature, headerMetaFn) {\n    if (!bytes.subarray(0, 7).every((v, i) => magicbytes[i] === v))\n        throw new Error('Not a FlatGeobuf file');\n    const bb = new flatbuffers.ByteBuffer(bytes);\n    const headerLength = bb.readUint32(magicbytes.length);\n    bb.setPosition(magicbytes.length + SIZE_PREFIX_LEN);\n    const headerMeta = HeaderMeta.fromByteBuffer(bb);\n    if (headerMetaFn)\n        headerMetaFn(headerMeta);\n    let offset = magicbytes.length + SIZE_PREFIX_LEN + headerLength;\n    const { indexNodeSize, featuresCount } = headerMeta;\n    if (indexNodeSize > 0)\n        offset += calcTreeSize(featuresCount, indexNodeSize);\n    const features = [];\n    while (offset < bb.capacity()) {\n        const featureLength = bb.readUint32(offset);\n        bb.setPosition(offset + SIZE_PREFIX_LEN);\n        const feature = Feature.getRootAsFeature(bb);\n        features.push(fromFeature(feature, headerMeta));\n        offset += SIZE_PREFIX_LEN + featureLength;\n    }\n    return features;\n}\nexport async function* deserializeStream(stream, fromFeature, headerMetaFn) {\n    const reader = slice(stream);\n    const read = async (size) => await reader.slice(size);\n    let bytes = new Uint8Array(await read(8, 'magic bytes'));\n    if (!bytes.every((v, i) => magicbytes[i] === v))\n        throw new Error('Not a FlatGeobuf file');\n    bytes = new Uint8Array(await read(4, 'header length'));\n    let bb = new flatbuffers.ByteBuffer(bytes);\n    const headerLength = bb.readUint32(0);\n    bytes = new Uint8Array(await read(headerLength, 'header data'));\n    bb = new flatbuffers.ByteBuffer(bytes);\n    const headerMeta = HeaderMeta.fromByteBuffer(bb);\n    if (headerMetaFn)\n        headerMetaFn(headerMeta);\n    const { indexNodeSize, featuresCount } = headerMeta;\n    if (indexNodeSize > 0) {\n        const treeSize = calcTreeSize(featuresCount, indexNodeSize);\n        await read(treeSize, 'entire index, w/o rect');\n    }\n    let feature;\n    while ((feature = await readFeature(read, headerMeta, fromFeature)))\n        yield feature;\n}\nexport async function* deserializeFiltered(url, rect, fromFeature, headerMetaFn) {\n    const reader = await HttpReader.open(url);\n    Logger.debug('opened reader');\n    if (headerMetaFn)\n        headerMetaFn(reader.header);\n    for await (const feature of reader.selectBbox(rect)) {\n        yield fromFeature(feature, reader.header);\n    }\n}\nasync function readFeature(read, headerMeta, fromFeature) {\n    let bytes = new Uint8Array(await read(4, 'feature length'));\n    if (bytes.byteLength === 0)\n        return;\n    let bb = new flatbuffers.ByteBuffer(bytes);\n    const featureLength = bb.readUint32(0);\n    bytes = new Uint8Array(await read(featureLength, 'feature data'));\n    const bytesAligned = new Uint8Array(featureLength + 4);\n    bytesAligned.set(bytes, 4);\n    bb = new flatbuffers.ByteBuffer(bytesAligned);\n    bb.setPosition(SIZE_PREFIX_LEN);\n    const feature = Feature.getRootAsFeature(bb);\n    return fromFeature(feature, headerMeta);\n}\nfunction buildColumn(builder, column) {\n    const nameOffset = builder.createString(column.name);\n    Column.startColumn(builder);\n    Column.addName(builder, nameOffset);\n    Column.addType(builder, column.type);\n    return Column.endColumn(builder);\n}\nexport function buildHeader(header) {\n    const builder = new flatbuffers.Builder();\n    let columnOffsets = null;\n    if (header.columns)\n        columnOffsets = Header.createColumnsVector(builder, header.columns.map((c) => buildColumn(builder, c)));\n    const nameOffset = builder.createString('L1');\n    Header.startHeader(builder);\n    Header.addFeaturesCount(builder, new flatbuffers.Long(header.featuresCount, 0));\n    Header.addGeometryType(builder, header.geometryType);\n    Header.addIndexNodeSize(builder, 0);\n    if (columnOffsets)\n        Header.addColumns(builder, columnOffsets);\n    Header.addName(builder, nameOffset);\n    const offset = Header.endHeader(builder);\n    builder.finishSizePrefixed(offset);\n    return builder.asUint8Array();\n}\nfunction valueToType(value) {\n    if (typeof value === 'boolean')\n        return ColumnType.Bool;\n    else if (typeof value === 'number')\n        if (value % 1 === 0)\n            return ColumnType.Int;\n        else\n            return ColumnType.Double;\n    else if (typeof value === 'string')\n        return ColumnType.String;\n    else if (value === null)\n        return ColumnType.String;\n    else\n        throw new Error(`Unknown type (value '${value}')`);\n}\nfunction introspectHeaderMeta(features) {\n    const feature = features[0];\n    const geometry = feature.getGeometry ? feature.getGeometry() : undefined;\n    const geometryType = geometry ? geometry.getType() : undefined;\n    const properties = feature.getProperties ? feature.getProperties() : {};\n    let columns = null;\n    if (properties)\n        columns = Object.keys(properties)\n            .filter((key) => key !== 'geometry')\n            .map((k) => new ColumnMeta(k, valueToType(properties[k]), null, null, -1, -1, -1, true, false, false));\n    const headerMeta = new HeaderMeta(toGeometryType(geometryType), columns, features.length, 0, null, null, null, null);\n    return headerMeta;\n}\n//# sourceMappingURL=featurecollection.js.map","import ColumnMeta from '../ColumnMeta';\nimport { ColumnType } from '../flat-geobuf/column-type';\nimport HeaderMeta from '../HeaderMeta';\nimport { fromFeature } from './feature';\nimport { parseGeometry } from './geometry';\nimport { buildHeader, deserialize as genericDeserialize, deserializeStream as genericDeserializeStream, deserializeFiltered as genericDeserializeFiltered, } from '../generic/featurecollection';\nimport { toGeometryType } from '../generic/geometry';\nimport { buildFeature } from '../generic/feature';\nimport { magicbytes } from '../constants';\nexport function serialize(featurecollection) {\n    const headerMeta = introspectHeaderMeta(featurecollection);\n    const header = buildHeader(headerMeta);\n    const features = featurecollection.features.map((f) => buildFeature(parseGeometry(f.geometry), f.properties, headerMeta));\n    const featuresLength = features\n        .map((f) => f.length)\n        .reduce((a, b) => a + b);\n    const uint8 = new Uint8Array(magicbytes.length + header.length + featuresLength);\n    uint8.set(header, magicbytes.length);\n    let offset = magicbytes.length + header.length;\n    for (const feature of features) {\n        uint8.set(feature, offset);\n        offset += feature.length;\n    }\n    uint8.set(magicbytes);\n    return uint8;\n}\nexport function deserialize(bytes, headerMetaFn) {\n    const features = genericDeserialize(bytes, fromFeature, headerMetaFn);\n    return {\n        type: 'FeatureCollection',\n        features,\n    };\n}\nexport function deserializeStream(stream, headerMetaFn) {\n    return genericDeserializeStream(stream, fromFeature, headerMetaFn);\n}\nexport function deserializeFiltered(url, rect, headerMetaFn) {\n    return genericDeserializeFiltered(url, rect, fromFeature, headerMetaFn);\n}\nfunction valueToType(value) {\n    if (typeof value === 'boolean')\n        return ColumnType.Bool;\n    else if (typeof value === 'number')\n        if (value % 1 === 0)\n            return ColumnType.Int;\n        else\n            return ColumnType.Double;\n    else if (typeof value === 'string')\n        return ColumnType.String;\n    else if (value === null)\n        return ColumnType.String;\n    else\n        throw new Error(`Unknown type (value '${value}')`);\n}\nfunction introspectHeaderMeta(featurecollection) {\n    const feature = featurecollection.features[0];\n    const properties = feature.properties;\n    let columns = null;\n    if (properties)\n        columns = Object.keys(properties).map((k) => new ColumnMeta(k, valueToType(properties[k]), null, null, -1, -1, -1, true, false, false));\n    const headerMeta = new HeaderMeta(toGeometryType(feature.geometry.type), columns, featurecollection.features.length, 0, null, null, null, null);\n    return headerMeta;\n}\n//# sourceMappingURL=featurecollection.js.map","import { deserialize as fcDeserialize, deserializeStream as fcDeserializeStream, deserializeFiltered as fcDeserializeFiltered, serialize as fcSerialize, } from './geojson/featurecollection';\nexport function serialize(geojson) {\n    const bytes = fcSerialize(geojson);\n    return bytes;\n}\nexport function deserialize(input, rect, headerMetaFn) {\n    if (input instanceof Uint8Array)\n        return fcDeserialize(input, headerMetaFn);\n    else if (input instanceof ReadableStream)\n        return fcDeserializeStream(input, headerMetaFn);\n    else\n        return fcDeserializeFiltered(input, rect, headerMetaFn);\n}\n//# sourceMappingURL=geojson.js.map"],"names":["ColumnMeta","constructor","name","type","title","description","width","precision","scale","nullable","unique","primary_key","ColumnType","CrsMeta","org","code","wkt","code_string","int32","Int32Array","float32","Float32Array","buffer","float64","Float64Array","isLittleEndian","Uint16Array","Uint8Array","Long","low","high","this","create","ZERO","toFloat64","equals","other","Encoding","GeometryType","ByteBuffer","bytes_","position_","allocate","byte_size","clear","bytes","position","setPosition","capacity","length","readInt8","offset","readUint8","readInt16","readUint16","readInt32","readUint32","readInt64","readUint64","readFloat32","readFloat64","writeInt8","value","writeUint8","writeInt16","writeUint16","writeInt32","writeUint32","writeInt64","writeUint64","writeFloat32","writeFloat64","getBufferIdentifier","Error","result","i","String","fromCharCode","__offset","bb_pos","vtable_offset","vtable","__union","t","bb","__string","opt_encoding","UTF8_BYTES","subarray","codePoint","a","b","c","__union_with_string","o","__indirect","__vector","__vector_len","__has_identifier","ident","charCodeAt","createLong","createScalarList","listAccessor","listLength","ret","push","createObjList","val","unpack","Builder","opt_initial_size","initial_size","minalign","vtable_in_use","isNested","object_start","vtables","vector_num_elems","force_defaults","string_maps","space","forceDefaults","dataBuffer","asUint8Array","prep","size","additional_bytes","align_size","old_buf_size","growByteBuffer","pad","addInt8","addInt16","addInt32","addInt64","addFloat32","addFloat64","addFieldInt8","voffset","defaultValue","slot","addFieldInt16","addFieldInt32","addFieldInt64","addFieldFloat32","addFieldFloat64","addFieldOffset","addOffset","addFieldStruct","nested","obj","notNested","new_buf_size","nbb","set","startObject","numfields","endObject","vtableloc","trimmed_size","len","existing_vtable","vt1","outer_loop","vt2","j","finish","root_table","opt_file_identifier","opt_size_prefix","size_prefix","file_identifier","SIZEOF_INT","FILE_IDENTIFIER_LENGTH","finishSizePrefixed","requiredField","table","field","table_start","vtable_start","startVector","elem_size","num_elems","alignment","endVector","createSharedString","s","Map","has","get","createString","utf8","createObjectOffset","pack","createObjectOffsetList","list","createStructOffsetList","startFunc","Column","__init","optionalEncoding","Byte","primaryKey","metadata","builder","nameOffset","titleOffset","descriptionOffset","metadataOffset","startColumn","addName","addType","addTitle","addDescription","addWidth","addPrecision","addScale","addNullable","addUnique","addPrimaryKey","addMetadata","endColumn","Crs","codeString","orgOffset","wktOffset","codeStringOffset","startCrs","addOrg","addCode","addWkt","addCodeString","endCrs","Header","envelope","index","envelopeLength","envelopeArray","byteOffset","geometryType","Unknown","hasZ","hasM","hasT","hasTm","columns","columnsLength","featuresCount","indexNodeSize","crs","envelopeOffset","data","numElems","columnsOffset","crsOffset","undefined","HeaderMeta","header","getRootAsHeader","column","crsMeta","Geometry","ends","endsLength","endsArray","Uint32Array","xy","xyLength","xyArray","z","zLength","zArray","m","mLength","mArray","tLength","tArray","tm","tmLength","parts","partsLength","endsOffset","xyOffset","zOffset","mOffset","tOffset","tmOffset","partsOffset","startGeometry","addEnds","addXy","addZ","addM","addT","addTm","addParts","endGeometry","buildGeometry","parsedGeometry","partOffsets","map","part","createPartsVector","createXyVector","createZVector","createEndsVector","flat","Array","isArray","sa","pairFlatCoordinates","newArray","toGeometryType","parseGeometry","geometry","cs","coordinates","end","css","geometries","extractParts","xySlices","from","e","slice","zSlices","fromGeometry","GeometryCollection","partType","MultiPolygon","Polygon","g","Point","MultiPoint","LineString","MultiLineString","toGeoJsonCoordinates","Feature","properties","propertiesLength","propertiesArray","geometryOffset","propertiesOffset","startFeature","addGeometry","addProperties","addColumns","endFeature","textEncoder","TextEncoder","textDecoder","TextDecoder","buildFeature","flatbuffers.Builder","view","DataView","newBytes","setUint16","Bool","setUint8","Short","setInt16","UShort","Int","setInt32","UInt","setUint32","setBigInt64","BigInt","Double","setFloat64","DateTime","str","encode","createPropertiesVector","featureOffset","fromFeature","feature","geoJsonfeature","array","getUint16","getUint8","getInt8","UByte","getInt16","getInt32","getUint32","Number","getBigInt64","ULong","getBigUint64","getFloat64","decode","parseProperties","concat","SliceSource","source","_source","_array","empty","_index","prototype","read","that","then","done","Promise","resolve","cancel","extendStatics","d","Object","setPrototypeOf","__proto__","p","hasOwnProperty","__awaiter","thisArg","_arguments","P","generator","reject","fulfilled","step","next","rejected","apply","__generator","body","f","y","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","op","TypeError","call","pop","__values","__await","__asyncGenerator","asyncIterator","q","resume","r","fulfill","settle","shift","RepeaterOverflowError","_super","message","_this","defineProperty","enumerable","captureStackTrace","__","__extends","swallow","NOOP","FixedBuffer","RangeError","_c","_q","configurable","add","full","remove","SlidingBuffer","DroppingBuffer","MAX_QUEUE_LENGTH","consumeExecution","err","execution","pending","createIteration","state","stop","e_1","_a","onnext","onstop","pushes","_b","_d","e_1_1","error","e_2","nexts","e_2_1","nextP","valueP","catch","floating","unhandled","onfulfilled","onrejected","finally","bind","execute","push1","stop1","stopP","createStop","executor","LogLevel","records","WeakMap","Repeater","push_2","push_3","race","merge","zip","latest","getIterators","values","options","e_3","iters","_loop_1","arguments","yieldValues","returnValues","values_1","values_1_1","e_3_1","contenders","advance","stopped","finalIteration","iteration","i_1","_loop_2","iters_1","iters_1_1","iter","e_4","e_4_1","advances","e_5","advances_1","advances_1_1","e_5_1","all","iterations","some","iterations_1","values_2","e_6","advances_2","advances_2_1","advance1","e_6_1","every","Config","_extraRequestThreshold","extraRequestThreshold","setExtraRequestThreshold","global","Logger","args","log","Debug","Info","Warn","level","logLevel","console","debug","info","warn","calcTreeSize","numItems","nodeSize","Math","min","max","numNodes","ceil","async","streamSearch","rect","readNode","NodeRange","nodes","_level","startNode","endNode","extendEndNodeToNewOffset","newOffset","assert","toString","minX","minY","maxX","maxY","levelBounds","levelNumNodes","levelOffsets","reverse","generateLevelBounds","leafNodesOffset","queue","nodeRange","nodeIndex","isLeafNode","levelBound","float64Array","uint32Array","pos","nodePos","low32Offset","readUint52","featureLength","nextPos","extraRequestThresholdNodes","nearestNodeRange","newNodeRange","high32Bits","low32Bits","magicbytes","HttpReader","headerClient","headerLength","indexLength","url","BufferedHttpRangeClient","assumedIndexLength","minReqLength","getRange","flatbuffers.ByteBuffer","fromByteBuffer","lengthBeforeTree","bufferedClient","offsetIntoTree","batches","currentBatch","searchResult","prevFeature","gap","logUsage","promises","flatMap","batch","readFeatureBatch","lengthBeforeFeatures","buildFeatureClient","httpClient","firstFeatureOffset","lastFeatureOffset","lastFeatureLength","batchSize","featureClient","readFeature","minFeatureReqLength","byteBuffer","bytesAligned","getRootAsFeature","bytesEverUsed","bytesEverFetched","ArrayBuffer","head","HttpRangeClient","start","purpose","start_i","end_i","byteLength","lengthToFetch","category","split","used","requested","efficiency","toFixed","requestsEverMade","bytesEverRequested","begin","range","fetch","headers","Range","arrayBuffer","deserializeStream","stream","headerMetaFn","reader","getReader","headerMeta","treeSize","buildHeader","columnOffsets","createColumnsVector","buildColumn","startHeader","addFeaturesCount","flatbuffers.Long","addGeometryType","addIndexNodeSize","endHeader","serialize","featurecollection","features","keys","k","valueToType","introspectHeaderMeta","featuresLength","reduce","uint8","deserialize","genericDeserialize","deserializeFiltered","open","selectBbox","genericDeserializeFiltered","input","fcDeserialize","ReadableStream","genericDeserializeStream","fcDeserializeStream","fcDeserializeFiltered","geojson","fcSerialize"],"mappings":"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"}